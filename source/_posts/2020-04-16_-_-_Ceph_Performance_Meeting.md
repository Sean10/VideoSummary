---
title: "2020-04-16 :: Ceph Performance Meeting"
date: 2020-04-29
updated: 2020-04-29
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 主要议题
1. **新PR讨论**
   - Igor提交了两个新PR：
     - 将Metallic Size和BlueStore切换回4K用于硬盘，基于其在混合分配器上的出色工作。
     - 延迟大写入PR，该PR看起来很有前景。
   - Ygritte确认大差异PR已默认启用，但混合分配器尚未默认启用，计划尽快完成。

2. **性能优化**
   - 讨论了一个新的PR，该PR借鉴了几年前在文件存储中使用的前置分割方案，旨在通过预分割目录来提高大型目录的性能。
   - Nihad将平衡器和up matt模式默认开启，以便在下一个发布周期中进行更多测试。
   - Keith正在审查一个关于NVMe设备的PR，尚未有实质性进展。

3. **性能测试**
   - Mahan和Peng进行了一些关于单线程和双线程每分片的测试，发现单线程在高Q深度下的随机读性能显著提高。
   - 讨论了是否应该从双线程每分片切换到单线程每分片，以及如何通过分析锁争用等问题来优化性能。

4. **其他更新**
   - Igor的两个PR（混合分配器和大写入）已合并。
   - 讨论了增加Jenkins测试以捕获性能回归的可能性。
   - Adams的PR通过了最近的测试轮次，预计很快会合并。

#### 决定事项
- 确认将大差异PR默认启用，并计划尽快将混合分配器也默认启用。
- 同意增加Jenkins测试以捕获性能回归，并可能调整测试参数以提高准确性。
- 决定继续探索单线程每分片的性能优势，并通过进一步的测试和分析来确定最佳配置。

#### 后续行动计划
- Igor将完成混合分配器的默认启用更改，并提交PR。
- Mahan和Peng将继续进行单线程和双线程每分片的性能测试，并提供详细的性能分析。
- 继续推进Adams的PR合并进程，以解决相关的性能瓶颈问题。
- 探索和实施更广泛的性能测试策略，包括在更大的集群环境中进行测试。

#### 其他
- 会议中还讨论了其他一些PR的更新和关闭情况，但没有重大决策或行动计划。

### 结论
会议涵盖了多个关于性能优化和测试的议题，确认了一些关键的PR合并和默认启用计划，并制定了进一步的性能测试和分析计划。所有参与者将在接下来的周期中继续推进这些工作。