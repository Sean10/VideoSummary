---
title: "Ceph Performance Meeting 2021-12-23"
date: 2021-12-24
updated: 2021-12-24
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 会议概述
本次会议主要讨论了Ceph存储系统中的一些关键问题和改进措施，涉及性能优化、代码重构、内存管理等多个方面。会议由Mark主持，参与人员包括Adam、Igor、Laura等。

#### 主要议题
1. **Pinning逻辑的改进**：
   - Adam和Igor提出了新的改进方案，涉及BlueStore中的pinning逻辑，特别是针对O_NOCACHE的操作。
   - 这些改进可能会影响性能，但有助于减少对tracker box的依赖，提高系统的稳定性。

2. **BlueStore日志的增量更新模式**：
   - Adam介绍了BlueStore日志的增量更新模式，该模式已经通过严格的测试，目前正在进一步的审查中。

3. **TTL缓存实现和Primary Balancer PR**：
   - Laura和Joshua正在合作进行Primary Balancer PR的代码重构，目的是使代码更加模块化和易于维护。
   - 该PR的主要目标是保持Balancer的功能不变，同时提高代码的可读性和可维护性。

4. **内存使用和性能优化**：
   - 讨论了BlueStore中的一些内存使用问题，特别是关于blob fsck的内存消耗。
   - Igor提出了一个内存减少的PR，旨在优化BlueStore的内存使用，减少对系统资源的消耗。

5. **EC2设备性能问题**：
   - 讨论了在Amazon EC2上运行Ceph时遇到的一些性能问题，特别是关于IOPS的保证和实际性能之间的差异。
   - 提出了一些可能的解决方案，包括增加IO合并和调整BlueStore的并发IO设置。

#### 决定事项
1. **Pinning逻辑的改进**：
   - 同意继续推进Adam和Igor的改进方案，并对其进行进一步的测试和审查。

2. **BlueStore日志的增量更新模式**：
   - 确认该模式已经通过测试，将继续进行代码审查和优化。

3. **Primary Balancer PR**：
   - 同意Laura和Joshua继续合作进行代码重构，并确保重构后的代码功能不变。

4. **内存使用优化**：
   - 同意Igor的内存减少PR，并计划在满足内存边界的前提下进行合并。

5. **EC2性能问题**：
   - 计划进一步研究和测试，以确定是否需要调整BlueStore的并发IO设置。

#### 后续行动计划
1. **Pinning逻辑的改进**：
   - 继续进行代码审查和测试，确保改进方案的有效性。

2. **BlueStore日志的增量更新模式**：
   - 完成代码审查，并进行必要的优化。

3. **Primary Balancer PR**：
   - 继续进行代码重构，并确保重构后的代码功能不变。

4. **内存使用优化**：
   - 完成Igor的内存减少PR的审查，并进行合并。

5. **EC2性能问题**：
   - 进行进一步的测试和研究，以确定是否需要调整BlueStore的并发IO设置。

#### 其他讨论
- 讨论了Ceph在不同硬件配置下的性能表现，特别是关于内存限制和硬件成本的权衡。
- 讨论了Ceph在不同环境下的部署策略，包括使用SSD和HDD的混合部署。

#### 会议结束
会议在讨论了所有议题后结束，Mark祝愿大家新年快乐，并期待在新的一年中继续合作。

---

以上是本次会议的详细纪要，涵盖了会议的主要内容、讨论的议题、决定的事项以及后续的行动计划。希望这份纪要能帮助大家更好地理解和跟进会议的成果。