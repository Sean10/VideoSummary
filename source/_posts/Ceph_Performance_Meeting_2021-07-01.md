---
title: "Ceph Performance Meeting 2021-07-01"
date: 2021-08-24
updated: 2021-08-25
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 主要议题
1. **新Pull Request讨论**
   - 本周仅有一个新的Pull Request，由Adam提交，涉及在BlueFS中实现细粒度锁定（fine grain locking）。此PR尚未准备好合并，因为存在死锁的可能性，需要进一步审查。
   - 另一个小的PR涉及将long double改为double，对性能有一定提升。

2. **已合并的PR**
   - Patrick在MDS中合并了一个PR，用于在请求读锁时刷新MD Log。
   - Kifu的B树分配器PR已经通过审查并合并。

3. **性能优化和后续行动**
   - 正在等待将数据定位器与混合合金和位图分配器结合形成混合模式的继续开发。
   - 讨论了OSD客户端消息容量（OSD client message cap）参数的调整，建议将其默认值设为256。

4. **流控制和CPU分区**
   - 讨论了在客户端实现更精细的流控制机制的可能性，以及CPU分区的优化策略。
   - 提到了在ARM架构上的测试结果，显示通过CPU分区可以获得性能提升。

#### 决定事项
- 确认将OSD客户端消息容量参数的默认值调整为256。
- 需要进一步研究和测试细粒度锁定PR，以确保不会引入死锁问题。
- 计划在Intel平台上复现ARM架构上的CPU分区测试，以验证其效果。

#### 后续行动计划
- 对细粒度锁定PR进行更深入的审查和测试。
- 在Intel平台上进行CPU分区测试，并与ARM架构上的结果进行对比。
- 继续推进数据定位器与混合合金和位图分配器的结合工作。

#### 其他讨论
- 讨论了在容器化环境中如何处理CPU分区的问题。
- 提到了在AWS上进行Graviton测试的可能性，以获取更多ARM架构的性能数据。

### 结论
会议涵盖了多个技术议题，包括新PR的审查、性能优化、流控制机制的改进以及CPU分区的策略。决定了一系列后续行动计划，以确保Ceph项目的持续改进和发展。