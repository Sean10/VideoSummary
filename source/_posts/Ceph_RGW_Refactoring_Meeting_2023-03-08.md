---
title: "Ceph RGW Refactoring Meeting 2023-03-08"
date: 2023-03-09
updated: 2023-03-09
tags:
categories:
- "视频总结"
subtitle: tech
---


## 会议纪要

### 会议主题
讨论关于Ceph分布式存储系统中端到端跟踪（end-to-end tracing）的实现和优化问题。

### 主要议题
1. **端到端跟踪的通用性和特定实现问题**：
   - 端到端跟踪技术本身不特定于某个领域，但其需要在代码中通过不同的API传递，并最终序列化到消息中。
   - Omri的工作涉及将跟踪信息添加到cell对象中，以便在对象进入rados时可以提取和序列化跟踪信息。

2. **代码重构对跟踪实现的影响**：
   - Casey的重构工作移除了一些对cell对象的调用，这使得跟踪信息的传递变得复杂。
   - 讨论了如何在rados实现中访问和传递跟踪信息，特别是在重构后如何处理cell对象和rados对象之间的关系。

3. **具体实施方案的讨论**：
   - 提出了几种可能的解决方案，包括将跟踪信息添加到所有API函数定义中，或者将跟踪信息作为对象的一个属性。
   - 讨论了在rados对象中存储跟踪信息的可能性，并探讨了如何通过现有结构传递跟踪信息。

### 决定事项
- 决定在rgw rados对象类中添加跟踪信息，以便在读写路径中获得更多的覆盖率。
- 确认了rgw rados对象类可以从rgw cell构造，因此可以在这些类中传递跟踪信息。

### 后续行动计划
- 继续探索和实施在rgw rados对象类中添加跟踪信息的方案。
- 考虑使用warp等工具进行并行工作负载测试，以增强升级测试的覆盖范围。
- 对现有Ragweed测试进行审计，并考虑添加新的测试案例，特别是针对新功能的开发。

### 其他讨论
- 讨论了删除不再使用的代码部分，特别是与Pub sub相关的代码。
- 探讨了升级测试的策略，包括使用Ragweed测试和可能的S3测试集成。

### 会议结论
会议对端到端跟踪的实现和优化进行了深入讨论，并确定了具体的实施方案和后续行动计划。通过这些措施，旨在提高Ceph系统在升级过程中的稳定性和可靠性。