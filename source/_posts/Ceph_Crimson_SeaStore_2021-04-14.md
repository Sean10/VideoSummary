---
title: "Ceph Crimson/SeaStore 2021-04-14"
date: 2021-04-16
updated: 2021-04-17
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 关键细节
- **PR审查进展**: 上周提交了多个PR，涉及watch和notify功能的实现，包括分离watch的超时处理和一些小的修复。
- **主要议题**: 讨论了watch和notify机制在经典OSD和crimson中的实现差异，以及如何优化这些机制以支持端到端映射。
- **决定事项**: 决定是否可以移除经典OSD中watch和session的耦合，以简化实现并提高效率。
- **后续行动计划**: 继续审查和合并PR，优化crimson的包管理，改进调试信息的输出格式，以及探索c-store的性能优化。

#### 讨论的主要议题
1. **PR审查**: 上周提交了多个PR，主要涉及watch和notify功能的实现，包括分离watch的超时处理和一些小的修复。计划在本周内完成这些PR的审查。
2. **Watch和Notify机制**: 讨论了watch和notify机制在经典OSD和crimson中的实现差异。经典OSD中，watch与session紧密耦合，而在crimson中，watch机制更为独立。讨论了是否可以移除经典OSD中watch和session的耦合，以简化实现并提高效率。
3. **包管理优化**: 讨论了crimson的包管理问题，建议创建一个单独的包来区分crimson和经典OSD，以避免混淆和提高用户识别度。
4. **调试信息输出**: 讨论了如何改进调试信息的输出格式，以便更方便地进行调试。提出了改进backtrace输出的需求，以便在崩溃时能更清晰地看到调用栈信息。
5. **c-store性能优化**: 讨论了c-store的性能优化问题，包括改进缓存数据结构和事务处理的内部机制，以及增加性能计数器以更好地监控和分析性能问题。

#### 决定的事项
- 继续审查和合并PR，特别是涉及watch和notify功能的PR。
- 决定是否可以移除经典OSD中watch和session的耦合，以简化实现并提高效率。
- 优化crimson的包管理，创建一个单独的包来区分crimson和经典OSD。
- 改进调试信息的输出格式，特别是backtrace的输出，以便更方便地进行调试。

#### 后续的行动计划
- 完成PR的审查和合并工作。
- 探索并实施移除经典OSD中watch和session耦合的方案。
- 优化crimson的包管理，创建单独的包。
- 改进调试信息的输出格式，特别是backtrace的输出。
- 探索c-store的性能优化，包括改进缓存数据结构和事务处理的内部机制，以及增加性能计数器。

### 结论
本次会议主要讨论了ceph存储系统中watch和notify功能的实现细节，以及如何优化这些机制以支持端到端映射。同时，还讨论了包管理、调试信息输出和c-store性能优化等关键问题，并制定了相应的后续行动计划。