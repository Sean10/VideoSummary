---
title: "CDS Squid: NVMe-oF-Gateway"
date: 2023-07-25
updated: 2023-07-26
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 会议主题：Ceph Gateway 的高可用性和可扩展性讨论

#### 与会人员：Ceph 研发团队成员

#### 会议时间：具体时间未提供

#### 会议地点：线上会议

#### 主要议题：

1. **高可用性和可扩展性**
   - **讨论内容**：团队讨论了如何通过使用 getter groups 来实现 RBD 卷的高可用性和可扩展性。目标是允许从不同的 gateway 访问相同的 RBD 卷。
   - **关键问题**：如何进行负载均衡，即如何决定哪个 gateway 服务于哪个卷。
   - **决定事项**：初步决定不自动进行负载均衡，而是通过 Gateway CLI 允许用户指定哪个 gateway 是某个卷的首选。未来可能会考虑自动化。

2. **多路径和 Ana 支持**
   - **讨论内容**：讨论了当前的多路径和 Ana 支持配置，以及用户如何配置这些设置。
   - **关键问题**：如何设置和优化路径状态，以及如何在配置文件中持久化这些设置。
   - **决定事项**：决定在未来的版本中允许用户通过 RPC 配置路径状态，但初始版本可能只支持一个优化路径。

3. **故障转移和恢复**
   - **讨论内容**：讨论了在没有 IP 故障转移的情况下，如何处理故障转移和恢复的问题。
   - **关键问题**：如何确保在故障转移时，客户端能够正确地重新连接到新的路径。
   - **决定事项**：需要进一步测试和验证，可能需要通过发现服务或类似机制来处理路径的移除和重新添加。

4. **并发 gRPC 处理**
   - **讨论内容**：由于时间限制，该议题被推迟到下一次会议讨论。

#### 后续行动计划：

- **负载均衡**：继续研究如何实现更智能的负载均衡机制。
- **多路径和 Ana 支持**：完善配置选项，允许用户更灵活地配置路径状态。
- **故障转移和恢复**：进行更多的测试，确保在各种故障情况下客户端能够正确地重新连接。
- **并发 gRPC 处理**：在下一次会议中深入讨论并发 gRPC 处理的细节。

#### 其他备注：

- 会议中还提到了关于 Gateway groups 的其他问题，如如何报告不可访问的命名空间等，这些问题将在未来讨论。
- 对于网络流量的问题，会议确认了在 Ceph 架构中，前端和后端的网络流量不需要成倍增加，因为复制发生在后端。

#### 会议结束语：
感谢所有与会者的参与，下一次会议将继续讨论未完成的技术议题。

---

以上是本次会议的详细纪要，涵盖了会议的关键细节、讨论的主要议题、决定的事项以及后续的行动计划。