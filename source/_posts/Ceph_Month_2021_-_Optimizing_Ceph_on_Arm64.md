---
title: "Ceph Month 2021: Optimizing Ceph on Arm64"
date: 2021-06-23
updated: 2021-06-24
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 会议主题：M64上的安全存储生态系统实践

#### 主讲人：Rachel

#### 会议内容概述：

1. **自我相关工作概述**：
   - 在AMP服务器上进行了安全存储生态系统的实践，包括使用特定指令或特性进行通用优化，如UTF-8 DRC ISA。
   - 在M64平台上启用了多个服务器项目，如SPDK系统、Safe CSI等，并进行了优化。
   - 支持使用Safe作为OpenStack和Kubernetes的存储后端。

2. **优化工作**：
   - 对UTF-8字符串处理和CRC-33实现进行了优化，分别提升了8倍和3倍的性能。
   - 在ISA库中添加了对CRC IGB、AES GCM等算法的支持，并实现了多缓冲算法。
   - 为M64添加了基于CPU特性集的实用函数，并提供了一个框架来生成基于特性集的最佳函数。

3. **64KB内核页面的启用和基准测试**：
   - 在M64平台上支持64KB内核页面，通过移除一级页表，提高了TLB查找速度和TLB命中率。
   - 使用一个包含一个监控器、一个管理器和三个OSD的测试集群进行了基准测试，结果显示使用64KB内核页面可以带来3%到11%的性能提升。

4. **SPDK和DPDK的优化**：
   - SPDK通过将所有必要驱动程序移到用户空间并采用轮询模式，避免了内核上下文切换和中断处理开销。
   - DPDK采用了C11内存模型，优化了内存屏障的使用，并利用GCP的incoming CPU特性进行优化。

5. **Ceph在ARM服务器上的性能状态**：
   - 在ARM服务器上进行了Ceph的性能测试，结果显示在某些情况下SPDK并未带来明显的性能提升。

6. **Ceph在C4上的工作**：
   - 支持Ceph作为Kubernetes容器云存储后端，并添加了对关键容器镜像的支持。
   - 正在进行的工作包括支持容器存储接口在线C4和Kubernetes存储e2e测试的改进。

#### 后续行动计划：

- 继续探索新的优化点，如利用可扩展向量扩展（SVE）和非临时性指令进行优化。
- 进一步研究和优化SPDK和DPDK在ARM架构上的性能。
- 继续支持Ceph在Kubernetes上的集成和优化。

#### 会议讨论：

- 讨论了ISA库在非Intel架构上的实现和使用，以及如何在混合CPU集群中安全使用ISA擦除编码。
- 探讨了在Raspberry Pi上使用ARM架构进行存储的可能性。

#### 会议结束：

- Rachel感谢大家的参与和提问，并表示将继续进行相关研究和优化工作。

---

**注：** 会议中提到的技术术语和项目名称如SPDK、DPDK、Ceph、ISA等，均为计算机科学和存储领域的关键技术，保留原文以确保准确性。