---
title: "Ceph Developer Summit Quincy: CephFS"
date: 2021-04-12
updated: 2021-04-13
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 会议概览
本次会议主要讨论了Ceph分布式存储系统中的多个关键议题，包括Dashboard和NFS的当前状态与后续步骤、MDS内存目标、文件系统加密（fs-crypt）、异步操作、递归删除、MDS滚动升级、文件系统镜像指标以及客户端隔离（fencing）等。

#### 讨论的主要议题
1. **Dashboard和NFS的当前状态与后续步骤**
   - 展示了Dashboard中文件系统特定组件的界面，包括默认系统、MDS信息、客户端连接、目录列表和快照创建等功能。
   - 讨论了NFS v3的支持问题，决定未来不再支持NFS v3，并可能在未来版本中移除相关支持。
   - 提到了NFS插件的集成工作，以及与Ganesha的兼容性问题。

2. **MDS内存目标**
   - 讨论了动态调整MDS缓存内存限制的PR，目标是根据MDS的总内存使用情况动态修改缓存限制。

3. **文件系统加密（fs-crypt）**
   - 讨论了文件名加密的实现进展，以及内容加密中遇到的截断问题。
   - 提到了客户端处理未缓存I/O时的加密需求，以及可能的解决方案。

4. **异步操作**
   - 讨论了异步创建和删除操作的实现，以及如何处理递归操作中的同步问题。

5. **递归删除**
   - 提出了添加递归删除RPC的建议，以简化管理操作，特别是针对子卷的删除。
   - 讨论了实现细节和潜在的挑战，如硬链接的处理。

6. **MDS滚动升级**
   - 讨论了简化MDS升级过程的方案，包括避免MDS在兼容性设置变化时自杀的问题。
   - 提出了支持混合版本MDS的长期目标。

7. **文件系统镜像指标**
   - 讨论了与RBD镜像指标对齐的需求，以便更好地监控和管理镜像过程。

8. **客户端隔离（fencing）**
   - 讨论了在Kubernetes集群中实现客户端隔离的需求，以便在集群不可用时能够安全地隔离客户端。
   - 提出了基于标签和生成ID的解决方案，但尚未确定最终方案。

#### 决定的事项
- 未来版本中将不再支持NFS v3。
- 将探索简化MDS升级过程的方法，并考虑支持混合版本MDS。
- 将研究递归删除RPC的实现细节和挑战。

#### 后续行动计划
- 继续推进文件系统加密的开发，解决截断问题。
- 研究并实现递归删除RPC，考虑硬链接的处理。
- 完善MDS滚动升级方案，确保升级过程的稳定性和安全性。
- 跟进文件系统镜像指标的开发，确保与RBD镜像指标的一致性。
- 进一步讨论和确定客户端隔离的最终方案。

#### 其他备注
- 会议中提到的多个议题仍处于讨论和开发阶段，需要进一步的工作和测试。
- 对于每个议题，都需要详细的开发计划和时间表，以确保功能的稳定实现和集成。

本次会议为Ceph的持续改进和发展提供了重要的讨论和决策基础，后续的工作将围绕这些关键议题展开。