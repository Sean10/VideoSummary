---
title: "Ceph RGW Refactoring Meeting 2024-01-31"
date: 2024-02-01
updated: 2024-02-02
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 会议主题：分布式存储系统中的持久化通知问题讨论

#### 参会人员：Ceph研发团队成员

#### 会议时间：[具体时间]

#### 会议地点：视频会议

#### 会议议程：
1. **持久化通知问题的讨论**
2. **代码冻结计划的调整**
3. **其他议题**

#### 会议内容：

##### 1. 持久化通知问题的讨论
- **问题背景**：在非持久化通知的实现中，存在一个问题，即当消息代理（broker）宕机或用户错误配置代理地址时，持久化通知队列会不断增长，事件永久保留。
- **现有解决方案**：引入了两个变量——生存时间（Time to Live, TTL）和最大重试次数（Max Retry），默认设置为零，意味着事件将永久保留。同时，允许在创建主题（create topic）时设置这些值。
- **讨论焦点**：是否应该允许用户在创建主题时设置这些值，以及如何处理用户设置与管理员设置之间的优先级关系。
- **提议**：建议通过配置标志（con flag）来控制这些属性的可见性和优先级，以便管理员设置的值具有更高优先级。
- **共识**：支持通过配置选项来支持两种模式，即允许用户配置或由存储管理员决定。
- **后续行动**：将撰写详细设计文档，并在Tracker中记录相关信息。

##### 2. 代码冻结计划的调整
- **原计划**：原计划在1月底进行代码冻结，创建squid分支。
- **调整**：经过讨论，决定将代码冻结推迟一周，以便其他组件有更多时间准备。
- **后续行动**：将继续关注Matt、kol、yal和Ali的工作进展，确保相关功能在代码冻结前准备就绪。

##### 3. 其他议题
- **PR合并**：讨论了多个分支上的PR合并问题，计划在squid分支创建后，开始将内容合并到主分支（Main），并在准备就绪后进行回溯合并（backport）。
- **依赖项**：提及了等待Neo rados chain的更新，以便在gate admin级别使用站点配置（site config）。

#### 决定事项：
- 持久化通知问题的解决方案将通过配置选项来实现，允许用户或存储管理员决定TTL和Max Retry的值。
- 代码冻结计划推迟一周，以确保所有组件准备就绪。

#### 后续行动计划：
- 撰写详细设计文档，并在Tracker中记录持久化通知问题的解决方案。
- 继续关注并整合各个PR，确保在代码冻结前所有功能准备就绪。
- 在squid分支创建后，开始将内容合并到主分支，并在准备就绪后进行回溯合并。

#### 会议结束：
感谢所有参会人员，会议结束。

---

以上是本次会议的详细纪要，涵盖了会议的关键细节、讨论的主要议题、决定的事项以及后续的行动计划。