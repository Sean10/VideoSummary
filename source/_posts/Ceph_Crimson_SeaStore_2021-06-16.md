---
title: "Ceph Crimson/SeaStore 2021-06-16"
date: 2021-06-16
updated: 2021-06-17
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 关键细节
1. **设备管理支持**：
   - 需要定义zone space和其他结构以支持设备管理。
   - 参考了FTL库和SPDK中的定义，以获取灵感。

2. **PR审查与更新**：
   - 审查了一个成熟的PR，涉及管理多个zones。
   - 更新了PR，修复了单元测试中的bug，并移除了catch extent。

3. **单元测试问题**：
   - 发现一个单元测试存在问题，但系统API测试未报告此问题。
   - 讨论了使用计数器等于1的问题，计划后续处理。

4. **构建问题**：
   - 在release build中发现parent pointer问题，debug build未触发此问题。
   - 讨论了垃圾收集行为，建议使用mbd测试工具。

5. **Ceph Master分支问题**：
   - 在当前master分支中，创建pool时出现问题，但在旧分支中可以正常工作。
   - 建议其他人验证是否存在问题。

6. **接口要求**：
   - 讨论了zone设备的接口要求，建议参考c-store中的segment manager.h。
   - 需要创建适配器以暴露设备信息。

7. **fmt库更新**：
   - 提议将fmt库从6升级到7.1.3或7.1.4，以解决gcc编译问题。
   - 创建了格式化构造，希望尽快合并。

8. **事务管理器转换**：
   - 正在进行事务管理器的interrupted future转换。
   - 计划将所有消费者也转换为使用interrupted future。

9. **调试与测试**：
   - 讨论了在调试过程中遇到的问题，如invalid extent和osd map读取问题。
   - 建议增加更多调试输出，以帮助定位问题。

#### 决定事项
1. **设备管理支持**：
   - 需要定义zone space和其他结构以支持设备管理。
   - 参考FTL库和SPDK中的定义，以获取灵感。

2. **PR审查与更新**：
   - 更新PR，修复单元测试中的bug，并移除catch extent。

3. **构建问题**：
   - 在release build中发现parent pointer问题，建议使用mbd测试工具。

4. **Ceph Master分支问题**：
   - 建议其他人验证是否存在问题。

5. **接口要求**：
   - 需要创建适配器以暴露设备信息。

6. **fmt库更新**：
   - 将fmt库从6升级到7.1.3或7.1.4。

7. **事务管理器转换**：
   - 正在进行事务管理器的interrupted future转换。

#### 后续行动计划
1. **设备管理支持**：
   - 定义zone space和其他结构。
   - 创建适配器以暴露设备信息。

2. **PR审查与更新**：
   - 继续审查和更新PR。

3. **构建问题**：
   - 使用mbd测试工具调试parent pointer问题。

4. **Ceph Master分支问题**：
   - 验证是否存在问题。

5. **接口要求**：
   - 创建适配器以暴露设备信息。

6. **fmt库更新**：
   - 将fmt库从6升级到7.1.3或7.1.4。

7. **事务管理器转换**：
   - 完成事务管理器的interrupted future转换。
   - 将所有消费者也转换为使用interrupted future。

8. **调试与测试**：
   - 增加更多调试输出，以帮助定位问题。
   - 验证osd map读取问题。

通过本次会议，团队明确了设备管理支持、PR审查与更新、构建问题、Ceph Master分支问题、接口要求、fmt库更新、事务管理器转换以及调试与测试等方面的关键细节、决定事项和后续行动计划。