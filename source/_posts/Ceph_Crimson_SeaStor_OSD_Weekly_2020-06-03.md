---
title: "Ceph Crimson/SeaStor OSD Weekly 2020-06-03"
date: 2020-06-03
updated: 2020-06-04
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 主要议题与讨论内容

1. **PR更新与同步**
   - 会议开始时，提到了上周的PR更新情况，特别是关于同步版本的问题。讨论了如何获取同步版本以及后续的审查和合并流程。
   - 决定在PR流程中处理评论，并计划在后续步骤中解决这些评论。

2. **代码重构与实现细节**
   - 讨论了提取公共代码的问题，特别是关于extended map tree和IRB tree的实现细节差异。
   - 决定暂时不停止提取公共代码，因为对某些实现细节的理解还不够深入。
   - 提到了正在实现的extended tree和key system的简化。

3. **Transaction Manager与Cache**
   - 解释了transaction manager如何通过cache进行操作，并强调了transaction manager在系统中的重要性。

4. **测试与性能评估**
   - 讨论了如何处理重复的crimson实例，并计划实施单元测试。
   - 提到了关于active item的单元测试问题，并计划在不同环境下实施测试。
   - 讨论了segment registry的实现，特别是如何跟踪和重用segments。

5. **Recovery测试**
   - 讨论了如何在现有QA框架内进行recovery测试，特别是涉及OSD的关闭和启动。
   - 建议先进行单元测试和手动测试，然后集成crimson到QA框架中。

6. **内存分配器问题**
   - 讨论了内存分配器的问题，特别是关于使用Liberty allocator的必要性。
   - 强调了需要一个单一的二进制文件，而不是根据不同的存储后端提供不同的二进制文件。

#### 决定事项

- 继续推进PR的同步和审查工作。
- 暂时不停止提取公共代码，直到对实现细节有更深入的理解。
- 实施单元测试和手动测试，以验证recovery机制。
- 解决内存分配器的问题，确保最终提供一个单一的二进制文件。

#### 后续行动计划

- 完成PR的同步和审查工作，并解决相关的评论问题。
- 继续实施extended tree和key system的简化工作。
- 实施单元测试和手动测试，确保recovery机制的正确性。
- 评估内存分配器的性能影响，并寻找解决方案以提供单一的二进制文件。

#### 备注

- 会议中提到了一些技术细节和代码实现问题，这些需要在后续的工作中进一步细化和解决。
- 强调了测试和性能评估的重要性，特别是在集成crimson到QA框架中的过程中。

### 结束语

会议在讨论了各项议题和后续行动计划后结束，所有参与者将在接下来的工作中按照会议决定推进相关工作。感谢所有参与者的贡献和讨论。