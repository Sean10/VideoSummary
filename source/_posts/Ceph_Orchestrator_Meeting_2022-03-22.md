---
title: "Ceph Orchestrator Meeting 2022-03-22"
date: 2022-03-29
updated: 2022-03-30
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 会议主题：服务发现与高可用性（HA）讨论

#### 参会人员：Ceph研发团队成员

#### 会议日期：[具体日期]

#### 会议地点：视频会议

#### 主要议题：

1. **服务发现（Service Discovery）**
   - **背景**：讨论了在Ceph中添加新端点以支持服务发现的需求。
   - **目标**：通过HTTP从外部获取当前配置，以便在客户环境中使用。
   - **当前状态**：目前端点URL在代码中硬编码，Ernesto建议考虑服务发现层级，以便集群内部客户端更容易发现服务。
   - **挑战**：需要集群内的名称解析，目前使用IP和Ceph文件系统（CephFS），存在IP硬编码问题，特别是在管理器（Manager）切换时。
   - **建议**：考虑使用虚拟IP（VIP）或高可用性代理（HA Proxy）来简化服务发现。

2. **Rook测试失败更新**
   - **问题描述**：Rook测试套件中出现的故障问题。
   - **解决方案**：决定移除未维护的编排器（Orchestrator）命令测试，以清理测试套件。
   - **后续行动**：继续监控和更新该问题。

3. **高可用性NFS（HA NFS）**
   - **测试结果**：结合三个相关的Pull Request，NFS守护进程在节点离线后能够重新调度，但恢复时间较长（约1-2分钟）。
   - **问题**：MDS与NFS共存时，MDS未重新调度，导致客户端连接恢复时间更长。
   - **建议**：考虑添加MDS到调度列表，并优化心跳检测机制。
   - **未来工作**：探索使用代理（Agent）进行更快速的心跳检测，以及解决端口冲突问题以支持守护进程的共存。

#### 决定事项：

- 继续使用当前的服务发现方法，同时考虑长期改进方案。
- 移除Rook测试套件中的未维护编排器命令测试。
- 优化NFS和MDS的高可用性配置，特别是心跳检测和重新调度机制。

#### 后续行动计划：

- 继续监控和更新Rook测试失败问题。
- 与Jeff Leighton讨论NFS和MDS的调度策略。
- 探索使用代理进行更快速的心跳检测，并解决端口冲突问题。

#### 会议结束：

会议于[具体时间]结束，下次会议预定于下周进行。

---

以上是本次会议的详细纪要，涵盖了服务发现、Rook测试失败和高可用性NFS的主要讨论内容、决定事项以及后续的行动计划。