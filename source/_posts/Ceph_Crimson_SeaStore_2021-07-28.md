---
title: "Ceph Crimson/SeaStore 2021-07-28"
date: 2021-08-23
updated: 2021-08-24
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 会议概要
本次会议主要讨论了Ceph项目的多个技术问题，包括代码审查、性能优化、错误修复以及未来的工作计划。会议参与者包括多位开发人员，他们分享了各自的工作进展和遇到的问题。

#### 主要议题
1. **代码审查与清理**
   - 一位开发者完成了对Bronze PR的审查，并进行了一些代码清理工作。
   - 另一位开发者完成了使用可中断未来（interruptable future）的树结构的实现，并即将提交PR。

2. **性能与错误分析**
   - 讨论了在容器化环境中配置Messenger时遇到的问题，原因是使用了错误的nonce。
   - 讨论了是否应该引入检查机制来避免nonce冲突，最终决定不引入，而是考虑使用随机nonce来降低冲突概率。

3. **性能比较工具**
   - 开发了一个工具用于比较Ceph的不同存储实现（如Ceph和Crimson）的性能，特别是在内存对象处理方面的开销。
   - 该工具主要用于比较memstore和alienstore的性能，发现alienstore在处理4K随机读取时的性能较低。

4. **日志处理与代码优化**
   - 讨论了日志处理的改进，特别是在PG状态日志处理方面。
   - 另一位开发者正在重写LBA树，并优化了扩展放置管理器的PR。

5. **性能测试与分析**
   - 进行了一些性能测试，包括缓存使用、事务验证和写放大效应的分析。
   - 讨论了如何自动化生成性能图表的过程。

#### 决定事项
- 不引入nonce冲突检查机制，而是使用随机nonce来降低冲突风险。
- 继续优化alienstore的性能，特别是在减少内核切换次数方面。
- 考虑将性能分析脚本集成到CBT工具目录中。

#### 后续行动计划
- 提交使用可中断未来（interruptable future）的树结构的PR。
- 继续优化扩展放置管理器的PR，并解决单元测试中的问题。
- 完成日志处理的改进，并提交相关PR。
- 继续进行性能测试和分析，特别是关于写放大效应的优化。
- 探索自动化生成性能图表的方法，并考虑将其集成到CBT工具目录中。

#### 其他备注
- 会议中提到的“nonce”、“interruptable future”、“alienstore”等术语是Ceph存储系统中的关键技术概念。
- 会议强调了代码质量和性能优化的重要性，以及持续改进和测试的必要性。

本次会议为Ceph项目的持续发展和优化提供了明确的方向和行动计划。