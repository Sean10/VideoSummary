---
title: "CDS Squid: RGW"
date: 2023-07-25
updated: 2023-07-26
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要：Ceph RGW 会议

#### 会议目的
本次会议旨在讨论Ceph S版本的规划，分享当前正在进行的一些项目，并将讨论内容更新到Ceph的Trello看板中。

#### 主要议题与讨论内容

1. **D4N数据缓存项目**
   - 该项目已进行较长时间，最近开始合并相关内容。
   - 预计在S版本中将包含一些关键能力，如增加灵活性和访问缓存目录的额外功能。

2. **Aeroflight集成**
   - 正在探索Aeroflight的前端集成，以实现通过飞行接口查询RGW并进行数据检索。
   - 目标是实现端到端的概念验证，尽管目前存在一些技术限制，如CentOS版本问题。

3. **POSIX文件后端和独立RGW部署**
   - 正在开发基于POSIX文件系统的RGW后端，并探索独立RGW部署的可能性。
   - 预计在S版本中将有一个最小可行产品（MVP）。

4. **跟踪（Tracing）**
   - 使用Jaeger和OpenTracing库进行集成，已合并初步支持。
   - 计划扩展跟踪覆盖范围，特别是在多站点复制中，并考虑在生产集群中使用。

5. **标记的Prometheus指标**
   - 目标是支持按用户或存储桶过滤RGW的计数器，尽管存在一些规模挑战。
   - Ali正在构建一个原型进行规模测试。

6. **多站点（Multi-site）**
   - 计划将存储桶索引日志从omap移出，以简化删除操作。
   - 还有其他多站点相关的计划，如产品化归档区域同步模块。

7. **异步重构**
   - 持续进行异步模型的转换，最近在Reef版本中合并了更多可选yield的支持。
   - 目标包括减少RGW线程池的大小，并探索基于C++20协程的多站点原型。

8. **QoS集成与Libreidos**
   - 目标是利用OSD中的QoS功能，确保客户端请求和后台工作的公平性。

9. **测试**
   - 强调在错误和延迟情况下的改进测试，包括使用Warp工具和其他测试方法。
   - 对性能测试表示兴趣，希望能有可重复的结果以比较不同版本和进行性能优化。

10. **生产检查工具**
    - 讨论了实时统计工具的需求，以帮助快速识别和解决性能问题。

#### 决定事项
- 所有讨论的内容将被整理并更新到Ceph的Trello看板中。
- 将继续推进各个项目的开发和集成工作。

#### 后续行动计划
- 继续进行D4N数据缓存项目的开发和集成。
- 探索和实现Aeroflight的前端集成。
- 开发和测试基于POSIX文件系统的RGW后端。
- 扩展跟踪功能，特别是在多站点复制中。
- 进行标记的Prometheus指标的规模测试。
- 推进多站点功能的开发和产品化。
- 完成异步重构和QoS集成工作。
- 加强错误和性能测试，确保软件质量和性能。

#### 会议结束
会议结束时，主持人确保所有讨论内容将被整理并更新到Trello看板中，并对所有参与者表示感谢。