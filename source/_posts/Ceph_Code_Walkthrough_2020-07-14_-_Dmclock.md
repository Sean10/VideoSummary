---
title: "Ceph Code Walkthrough 2020-07-14: Dmclock"
date: 2020-07-14
updated: 2020-07-15
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 会议概述
本次会议是关于Ceph分布式存储系统中dmclock算法的实现讨论。会议由Eric主持，旨在回顾和讨论dmclock算法在Ceph中的应用和改进。

#### 主要议题
1. **dmclock算法介绍**：
   - dmclock是一种分布式服务质量（QoS）算法，用于在Ceph的OSD（对象存储守护进程）中提高公平性。
   - 该算法基于mclock算法，并进行了分布式扩展，称为dmclock。

2. **算法实现细节**：
   - dmclock算法作为库实现，包含头文件和模板化代码，可以灵活应用于多种场景。
   - 算法的核心在于客户端和服务器端的交互，服务器不共享客户端信息，而是由客户端跟踪服务历史。

3. **代码结构和组织**：
   - dmclock代码作为Ceph的子模块，包含客户端和服务器端的实现。
   - 代码中使用了间接 intrusive heap数据结构来管理客户端请求的优先级。

4. **性能和优化**：
   - 讨论了dmclock算法在Ceph中的性能表现和潜在的优化点。
   - 提到了一些操作可能较为昂贵，例如通过过滤移除请求的操作。

#### 决定事项
- 确认了dmclock算法在Ceph中的重要性和当前的实现状态。
- 讨论了算法的性能和可能的改进方向。

#### 后续行动计划
- 继续优化dmclock算法的性能，特别是在处理请求过滤和移除操作方面。
- 鼓励社区成员参与dmclock算法的讨论和改进，特别是在Ceph社区中有经验的开发者。

#### 其他备注
- 会议中提到了几位关键开发者（如Sam、Casey、Abhishek）在dmclock算法上的贡献。
- Eric表示愿意回答关于dmclock算法的具体问题，尽管他可能需要一些时间来回顾相关细节。

本次会议为Ceph社区成员提供了一个深入了解和讨论dmclock算法的机会，有助于推动该算法在Ceph中的进一步应用和优化。