---
title: "CDS G/H (Day 1) - RBD review"
date: 2014-06-24
updated: 2014-06-25
tags:
categories:
- "视频总结"
subtitle: tech
---



### 会议纪要

**会议主题**： RBD（Rados Block Device）功能回顾与讨论

**会议时间**： 2023年10月27日

**参会人员**： Sage, Josh, Sarah, Adam, Greg 等

**会议内容**：

**1. RBD 日志记录与镜像功能讨论**

*   **日志记录**：
    *   RBD 日志记录功能旨在实现异步复制，支持跨数据中心或集群的数据复制。
    *   日志记录会将所有数据操作写入日志文件，并通过 Raft 对象进行条带化存储。
    *   读取日志文件并重新播放到其他集群或池，实现数据的异步复制。
    *   需要解决的问题包括日志文件的存储位置、镜像代理的结构和同步机制等。
*   **镜像代理**：
    *   需要设计一个能够协调多个代理之间工作负载的镜像代理。
    *   可以考虑使用一个调度过程来管理需要镜像的图像列表，并为每个图像运行子进程进行镜像。
    *   镜像代理可以在目标集群中运行，以避免网络接口成为瓶颈。

**2. RBD 功能讨论**

*   **多站点复制**：
    *   目前可以使用 RBD 快照和快照镜像实现多站点复制，但实时性较差。
    *   新的异步复制功能可以实现更近实时的多站点复制。
*   **默认缓存**：
    *   可以考虑将缓存设置为默认选项，以提高性能。
    *   需要确定合适的默认缓存策略。
*   **对象缓存**：
    *   修复了对象缓存中的一些性能问题。
    *   可以考虑改进对象缓存的性能。
*   **RBD df 命令**：
    *   可以使用 RBD df 命令查看已分配的空间和实际使用空间。
*   **iSCSI 集成**：
    *   目前 iSCSI 集成功能有限，需要改进。
    *   需要提供更完善的文档和工具。
*   **用户空间 passthrough**：
    *   可以考虑使用用户空间 passthrough 来利用 RBD 的新特性。
*   **性能监控**：
    *   可以改进性能监控功能，以更好地监控 RBD 集群的性能。
*   **客户端识别**：
    *   可以改进客户端识别功能，以便更好地跟踪不同客户端的 I/O 模式。

**3. RBD 丢弃功能**

*   RBD 丢弃功能已接近完成，但仍有一些问题需要解决。
*   将进行更多的测试，以确保该功能的可靠性。

**4. 其他事项**

*   将讨论 RBD 的格式化、条带化等功能。

**后续行动计划**：

*  Josh 将负责 RBD 日志记录和镜像功能的设计和实现。
*   其他开发人员将负责 RBD 其他功能的改进和优化。
*   将继续进行 RBD 丢弃功能的测试和修复。
*   将讨论 RBD 的格式化、条带化等功能。

**备注**：

*   会议中提到了一些计算机科学/ceph 领域的英文关键词，如 Raft、Raft 对象、条带化、异步复制、多站点复制、快照、缓存、性能监控、客户端识别等。