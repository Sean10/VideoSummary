---
title: "Ceph Performance Meeting 2021-05-20"
date: 2021-05-20
updated: 2021-05-21
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 关键细节
- **性能相关PR**: 本周没有新的性能相关的PR。
- **关闭的PR**: 本周有两个PR被关闭：
  - 一个针对Crimson的优化，涉及客户端请求处理并行性。
  - 另一个是关于自动调优，让管理器自动设置容器内存限制。

#### 讨论的主要议题
- **自动调优**: 讨论了自动调优的实现细节，特别是关于如何根据某些比例自动设置容器内存限制。
- **DoWriteSmall PR**: 讨论了DoWriteSmall PR的更新，计划通过设置标志来控制何时使用DoWriteSmall或直接IO，并观察其行为。
- **RGW压缩绕过**: 讨论了一个关于RGW压缩后绕过OSD压缩的PR，虽然核心理念被认为是好的，但实现似乎过于复杂。
- **LRU缓存管理**: 讨论了一个关于在BlueStore中使用LRU缓存管理器的PR，该管理器可以跟踪不同LRU缓存中的项目，并将其与年龄段关联，以便更好地管理内存分配。

#### 决定的事项
- **性能数据收集**: 决定开始收集更多关于IO大小和类型的信息，以及OSD和BlueStore内部状态的数据，以便更好地理解工作负载和优化系统。
- **数据收集频率**: 讨论了数据收集的频率，建议可能需要更细粒度的数据收集，例如每小时一次，以便更好地捕捉集群的日常负载周期。

#### 后续的行动计划
- **确定最小数据集**: 开始确定要收集的最小数据集，并创建相应的telemetry报告。
- **用户反馈**: 通过邮件列表与用户沟通，了解他们是否愿意分享性能数据，并解释这将如何帮助优化Ceph。
- **实验性数据收集**: 考虑设置一个实验性的数据收集通道，让愿意参与的用户可以分享更多详细数据，以便进行更深入的分析和优化。

#### 其他讨论点
- **内存使用**: 讨论了关于内存使用的统计数据，如PG日志、缓存和块缓存的使用情况，以及这些数据如何帮助理解集群的行为和性能。
- **数据隐私和安全性**: 讨论了数据收集的隐私和安全问题，特别是如何确保用户数据的安全性和匿名性，以及如何处理用户可能的后悔情况。

### 结论
会议涵盖了多个关于Ceph性能优化和数据收集的重要议题，确定了后续的行动计划，并强调了用户反馈和数据隐私的重要性。通过这些讨论和决策，Ceph社区将继续推动项目的改进和发展。