---
title: "Ceph Developer Monthly 2021-02-03"
date: 2021-03-09
updated: 2021-03-10
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 会议主题：Ceph 镜像指标与跨服务共享

**讨论内容：**
- **目标与挑战：** 在 Kubernetes 环境中，如何实现一致的告警机制，特别是针对 RGW 多站点或 Ceph 镜像等场景。
- **实现思路：** 讨论了如何跟踪和分类 SLA（服务级别协议），以及如何在工程上实现这些 SLA 的报告和度量，以便于构建 Grafana 仪表板进行监控。
- **技术细节：** 探讨了在 Ceph Manager 中暴露这些指标的可能性，并讨论了 Prometheus 作为数据消费方的可行性。同时，讨论了当前 Ceph 镜像守护进程（demons）如何报告状态，以及如何改进这些报告以更好地支持告警和监控。

**决定事项：**
- 需要进一步研究 RBD 镜像和 RGW 当前报告的数据结构和逻辑，以确定是否可以标准化这些报告。
- 考虑在每个守护进程中集成 Prometheus 导出器，以便直接从守护进程收集指标。

**后续行动计划：**
- 指定人员进行深入研究，包括分析现有数据报告和探索集成 Prometheus 导出器的可行性。
- 在社区中发起讨论，收集用户和开发者的反馈，以确定最佳实施方案。

#### 会议主题：满载集群中的删除操作处理

**讨论内容：**
- **问题描述：** 当集群满载时，Ceph 会阻止写操作，但删除操作可能仍然受限，特别是在 Ceph Manager 模块中。
- **技术挑战：** 讨论了如何在不增加集群负担的情况下，确保删除操作能够顺利进行，特别是在 Manager 模块中。

**决定事项：**
- 需要进一步研究 Manager 模块中的删除操作逻辑，以及如何改进这些操作以避免集群满载时的阻塞问题。
- 考虑引入更多的后台工作线程或改进现有的线程池管理，以提高 Manager 的并发处理能力。

**后续行动计划：**
- 进行性能测试，以确定 Manager 模块的并发处理能力和资源需求。
- 在社区中讨论并确定改进 Manager 模块并发处理的最佳实践。

#### 会议主题：消息传递中的传输压缩

**讨论内容：**
- **技术提案：** 讨论了在 Ceph 消息传递层（Messenger）中添加传输压缩的可能性，特别是针对 OSD 之间的通信。
- **潜在问题：** 讨论了在消息传递层进行压缩可能带来的性能开销，以及是否应该针对特定类型的消息或数据负载进行优化。

**决定事项：**
- 需要在社区中进行更广泛的讨论，以确定最佳的压缩实施位置和方式。
- 考虑在数据负载层进行压缩，而不是在整个消息层，以减少不必要的重复压缩和解压缩操作。

**后续行动计划：**
- 在社区邮件列表中发起讨论，收集关于传输压缩实施的意见和建议。
- 根据反馈和进一步的技术评估，确定最终的实施方案。

### 会议总结
本次会议主要讨论了 Ceph 存储系统中的多个关键技术问题，包括镜像指标的共享、满载集群中的删除操作处理，以及消息传递中的传输压缩。会议决定了一系列后续行动计划，以推动这些问题的解决和优化。