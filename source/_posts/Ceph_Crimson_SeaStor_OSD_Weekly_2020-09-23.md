---
title: "Ceph Crimson/SeaStor OSD Weekly 2020-09-23"
date: 2020-09-23
updated: 2020-09-24
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 会议主题：Ceph存储系统中的结构测试与修复讨论

#### 会议时间：[具体日期]

#### 参会人员：[具体人员名单]

#### 主要讨论内容：

1. **结构测试与修复进展**
   - 上周工作重点是结构测试的修复。
   - 讨论了在处理对象上下文时，请求执行中的间隔变化问题。
   - 提出了引入暂停和恢复语义（suspend and resume semantic）在tri-mutex中，以解决中断请求的顺序问题。

2. **中断请求处理**
   - 讨论了中断请求在tri-mutex中的处理方式，特别是如何确保中断请求能够重新获取锁。
   - 强调了在PG间隔变化时，所有请求需要重新排队（re-queue），而不是简单地重新获取锁。

3. **请求处理流程**
   - 详细讨论了IO请求的处理流程，包括排队、获取锁、读取对象上下文等步骤。
   - 强调了在PG间隔变化时，所有请求需要从处理流程的起点重新开始。

4. **内存状态管理**
   - 讨论了在PG间隔变化时，如何处理内存中的对象上下文和状态。
   - 决定在PG间隔变化时，所有请求需要丢弃所有内存状态，重新从起点开始处理。

5. **垃圾收集（Garbage Collection）**
   - 讨论了Ceph存储系统中的垃圾收集机制，包括如何管理空间和避免大量垃圾收集操作。
   - 介绍了两个可调参数：目标空闲空间和使用空间与不可用空间的比率。

6. **其他工作进展**
   - 讨论了中断可 futures 的调试进展。
   - 介绍了GH对象的集成和随机插入的单元测试进展。

#### 决定事项：

- 所有请求在PG间隔变化时需要重新排队，从处理流程的起点重新开始。
- 在PG间隔变化时，丢弃所有内存状态，避免使用过时的对象上下文和状态。
- 继续优化垃圾收集机制，确保系统空间的有效管理。

#### 后续行动计划：

- 继续进行结构测试的修复工作，确保请求处理的正确性和顺序。
- 完成中断可 futures 的调试，并提交相关PR。
- 完成GH对象的集成和单元测试，修复相关bug。
- 继续优化垃圾收集机制，确保系统的稳定性和性能。

#### 备注：

- 会议中提到的“tri-mutex”、“PG interval change”、“re-queue”等关键词是Ceph存储系统中的专业术语，需要特别注意其在系统中的具体含义和应用。

#### 会议结束时间：[具体时间]

#### 下次会议预告：[具体日期和时间]

---

以上是本次会议的详细纪要，涵盖了会议的关键细节、讨论的主要议题、决定的事项以及后续的行动计划。