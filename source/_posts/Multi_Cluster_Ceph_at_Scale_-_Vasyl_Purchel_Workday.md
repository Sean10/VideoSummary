---
title: "Multi Cluster Ceph at Scale - Vasyl Purchel, Workday"
date: 2023-05-05
updated: 2023-05-05
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 会议参与者
- **Vasil**：Workday的高级软件工程师，隶属于存储平台团队，专注于OSF解决方案在其数据中心的应用。

#### 公司背景
- **Workday**：作为领先的云端企业解决方案提供商，专注于财务和人力资源领域，致力于确保客户满意度。

#### 团队概况
- **团队规模**：由五名工程师和一名Red Hat顾问组成。
- **项目管理**：除了主要项目外，还维护和开发其他三个项目。
- **数据中心**：管理五个数据中心，拥有23个集群，超过1200台服务器，近100PB的原始存储容量。

#### 主要挑战与解决方案
- **数据存储与恢复**：
  - **OpenStack镜像存储**：确保镜像下载在两分钟内完成，以支持虚拟机快速部署。
  - **MySQL备份**：从NFS迁移到Ceph存储，使用日志设备，将备份时间从24小时缩短到7小时。

- **集群管理**：
  - **多集群策略**：为每个环境设置独立集群，以便单独更新和管理，减少故障影响范围。
  - **性能与存储分离**：根据需求配置不同类型的集群，如性能集群和归档集群。

- **技术支持与监控**：
  - **Red Hat商业支持**：在遇到内核bug时提供关键帮助。
  - **统一监控系统**：将所有集群的指标和日志集中到一个系统中，便于性能比较和问题诊断。

#### 技术细节
- **集群配置**：
  - **标准集群**：初始配置为8台服务器，每台32TB，使用三副本策略。
  - **高密度集群**：配置为10台服务器，每台80-90TB，使用擦除编码技术，提供1.5倍的存储容量。

- **自动化与持续交付**：
  - **自动化需求**：随着集群和服务器数量的增加，手动管理变得不可行，需要自动化工具。
  - **持续交付流程**：从OpenStack VM测试到生产环境的逐步验证，确保每个变更的安全性和有效性。

#### 未来规划与挑战
- **升级与维护**：
  - **Ceph版本升级**：计划从Ceph 4升级到Ceph 5（Pacific），尽管Ceph 6已发布。
  - **自动化与监控**：继续加强自动化和监控工具，确保集群的稳定性和性能。

- **跨站点复制**：
  - **灾难恢复**：探索Ceph自身的跨站点复制功能，减少用户的数据复制负担。

#### 结论
- **Vasil**强调了自动化、社区贡献和持续改进的重要性，同时提到了面临的挑战和未来的发展方向。

#### 后续行动计划
- 继续推进Ceph版本的升级。
- 加强自动化和监控系统的建设。
- 探索和实施跨站点复制的解决方案。

#### 会议结束
- **Vasil**感谢大家的参与，并表示愿意回答任何问题。

[会议结束，掌声]