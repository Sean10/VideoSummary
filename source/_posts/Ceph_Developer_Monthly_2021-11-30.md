---
title: "Ceph Developer Monthly 2021-11-30"
date: 2021-12-02
updated: 2021-12-03
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 会议主题：Ceph分布式存储系统中的随机跟踪（Tracing）部署

**主要议题：**
- **跟踪系统介绍：** Omri介绍了Ceph中使用的跟踪系统，特别是RDW（Rados Gateway Daemon）中的跟踪实现。他们使用Jaeger作为跟踪后端，OpenTelemetry作为客户端发送跟踪数据到后端。
- **跟踪系统的实现：** 创建了一个Tracer类，使用OpenTelemetry客户端SDK。从OpenTracing迁移到OpenTelemetry，因为OpenTracing的C++库不再维护，而OpenTelemetry是一个活跃更新的新库，支持Jaeger后端。
- **当前工作进展：** 在RDW和OSD中实现了新的跟踪功能，能够在运行时启用或禁用跟踪，默认情况下禁用。还实现了跟踪信息的序列化和反序列化，以便统一跨多个操作的跟踪。
- **未来计划：** 条件跟踪（Conditional Tracing），允许在特定情况下（如特定存储桶）启用跟踪；多站点跟踪（Multi-site Tracing），帮助调试多站点环境；以及RGW和OSD的端到端跟踪集成。

**决定事项：**
- 继续开发和测试跟踪功能，确保其在多节点环境中的稳定性和性能。
- 探索和实现条件跟踪和多站点跟踪功能。

**后续行动计划：**
- 完成性能测试，比较不同跟踪配置下的性能影响。
- 部署Jaeger组件与Ceph集成，确保通过SafeADM正确部署Jaeger容器。
- 继续开发条件跟踪和多站点跟踪功能。

#### 会议主题：Ceph开发环境中的Docker背景

**主要议题：**
- **开发环境介绍：** 讨论了使用Docker容器作为Ceph开发环境的问题，特别是在多容器和系统级权限下的挑战。
- **当前状态和挑战：** 尽管在某些机器上工作良好，但在其他机器上由于cgroup v2和权限问题遇到了困难。
- **可能的解决方案：** 考虑使用Podman替代Docker，或手动挂载必要的文件系统以支持systemd在容器中的运行。

**决定事项：**
- 继续探索和测试不同的容器化解决方案，以找到最适合Ceph开发环境的工具。

**后续行动计划：**
- 测试Podman作为Docker的替代方案。
- 进一步研究和实现手动文件系统挂载以支持systemd。

#### 会议总结

本次会议主要讨论了Ceph系统中的跟踪功能部署、开发环境的容器化问题以及相关技术挑战。团队将继续在这些领域进行深入研究和开发，以提高Ceph的性能和开发效率。