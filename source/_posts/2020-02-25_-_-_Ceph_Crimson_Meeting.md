---
title: "2020-02-25 :: Ceph Crimson Meeting"
date: 2020-04-03
updated: 2020-04-04
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 与会人员
- Kiku
- 其他未具名参与者

#### 会议日期
- 本周

#### 主要议题与讨论内容

1. **Ceph 8 Index 代码审查**
   - Kiku 本周主要工作是审查 Ceph 8 Index 的代码，深入理解其设计。
   - 计划继续审查代码，并可能对设计进行优化。

2. **恢复逻辑的分解与优化**
   - 讨论了将恢复逻辑分解为至少四个不同阶段的可能性：
     - PG log 基于恢复
     - 回填恢复（backfill recovery）
     - PG 扫描
     - 分散状态与回填和 PG log 基于恢复相关
   - 建议从后端扫描开始，逐步推进。

3. **单元测试与系统测试**
   - 讨论了代码中单元测试的不足，特别是在回填逻辑方面。
   - 提到了 PG log 的重要性，以及其难以复现的边缘案例。
   - 建议在 crimson 中实现代码时，尝试将其分解为组件，以便更好地进行单元测试。

4. **LLVM 支持与构建细节**
   - 讨论了是否需要支持 LLVM，特别是在非生产环境中。
   - 决定先合并代码，后续再考虑构建和非生产环境的细节。

5. **Sister Allocator 的使用**
   - 讨论了 Sister Allocator 在 POSIX 环境中的使用问题。
   - 计划与 Sister Gas 确认是否可以在 POSIX 环境中使用 Sister Allocator。

6. **性能改进与测试**
   - 讨论了性能改进的可能性，特别是在使用 Sister Allocator 时。
   - 计划进行一些基准测试，以评估性能改进。

7. **代码审查与注释**
   - 讨论了代码审查的重要性，特别是在 scrubbing 相关代码中。
   - 计划对代码进行详细审查，并在必要时添加注释。

8. **后续行动计划**
   - 继续审查和优化 Ceph 8 Index 的代码。
   - 分解和优化恢复逻辑，特别是从后端扫描开始。
   - 在 crimson 中实现代码时，尝试将其分解为组件，以便更好地进行单元测试。
   - 确认 Sister Allocator 在 POSIX 环境中的使用问题，并进行必要的调试。
   - 进行性能基准测试，以评估性能改进。

#### 结论
会议强调了代码审查、单元测试和性能优化的重要性，并制定了具体的行动计划，以确保 Ceph 项目的持续改进和发展。