---
title: "Ceph Performance Meeting 2020-10-29"
date: 2020-11-03
updated: 2020-11-03
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 关键细节
- **PR审查与更新**：
  - 性能改进PR：Jason对异步创建镜像快照的性能改进PR进行了审查。
  - 集成AVX擦除编码实现PR：该PR主要涉及构建变更，性能提升效果待定。
  - 关闭的PR：RBD缓存PR已合并，代码量较大，后续需进一步强化。
  - 无缓存重建PR：已被替换，新PR待审查。

- **BlueStore动态层级PR**：
  - 该PR存在一段时间，与Adam的列族分片工作不兼容，需要Adam进行审查。

- **缓存分桶代码**：
  - 大部分代码已合并到主分支，剩余部分正在单独分支中处理。

- **PG自动缩放讨论**：
  - 讨论了改进PG自动缩放算法的必要性，以改善初始安装时的性能。
  - 提出了通过调整PG日志长度来控制内存使用，而不是直接调整PG数量的方法。
  - 讨论了不同类型池（如数据池和索引池）的处理策略。

- **内存使用和缓存年龄分桶**：
  - Adam修复了数据缓存无法正确增长的bug。
  - 讨论了缓存管理和内存碎片化问题，提出了使用Radix工作改进内存分配的建议。

- **I/O环讨论**：
  - 尝试在Kernel 5.9上构建包含liburing支持的Ceph代码，发现构建问题并初步测试未见性能差异。

#### 决定事项
- **PG自动缩放算法改进**：
  - 同意改进PG自动缩放算法，以避免频繁的数据移动和优化并发性能。

- **内存管理和缓存优化**：
  - 确认了内存碎片化问题，并讨论了可能的解决方案，包括改进内存分配策略和缓存管理。

#### 后续行动计划
- **PG自动缩放算法实现**：
  - 继续开发和测试新的PG自动缩放算法，确保其在不同使用场景下的有效性。

- **内存碎片化问题解决**：
  - 进一步研究和测试内存碎片化解决方案，包括Radix工作的应用和缓存管理的优化。

- **I/O环性能测试**：
  - 继续验证liburing在Ceph中的正确使用，并进行更深入的性能测试。

- **下周议程**：
  - 将PG日志相关讨论作为下周会议的首要议题。

会议结束时，团队成员被鼓励在即将到来的一周中继续努力，并期待在下一次会议中分享更多进展。