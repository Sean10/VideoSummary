---
title: "Ceph RGW Refactoring Meeting 2023-11-15"
date: 2023-11-20
updated: 2023-11-21
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 会议概览
本次会议主要讨论了Ceph分布式存储系统中的多个技术议题，包括通知数据模型的更新、生命周期与复制、动态重分片以及配置初始化等问题。会议涉及了技术细节的讨论、解决方案的提出以及后续行动计划的制定。

#### 主要议题与讨论

1. **通知数据模型的更新**
   - **讨论内容**：讨论了多站点通知数据模型的更新，特别是从旧数据模型迁移到新数据模型的策略。提出了多种迁移方案，包括支持两种数据模型的代码路径、迁移过程的自动化等。
   - **决定事项**：建议在升级完成后进行迁移，使用新的区域组特性来全局启用新格式，并在迁移过程中发出警告以确保管理员注意到旧配置的使用。
   - **后续行动**：将详细讨论和更新记录在Gist中，并考虑在Slack频道中进一步讨论。

2. **生命周期与复制**
   - **讨论内容**：探讨了生命周期事件日志记录的问题，特别是对象版本化带来的挑战。讨论了是否应停止对非版本化桶的日志记录。
   - **决定事项**：建议首先停止对非版本化桶的日志记录，并考虑增加智能生命周期规则以根据版本化状态进行不同的日志记录。
   - **后续行动**：Jan将接手此问题，并进一步探讨解决方案。

3. **动态重分片**
   - **讨论内容**：讨论了动态重分片中减少分片数量的需求，提出了在重分片队列中添加时间戳以延迟执行的方案。
   - **决定事项**：建议通过配置选项来控制时间延迟和分片因子，并考虑在桶创建API中添加分片计数字段。
   - **后续行动**：Eric将继续探讨此方案，并在后续会议中进一步讨论。

4. **配置初始化**
   - **讨论内容**：讨论了如何在区域创建时初始化存储过滤器的配置，以及JSON配置的具体格式。
   - **决定事项**：建议使用标准JSON字段“type”来加载相应的驱动程序，并递归解析JSON块。
   - **后续行动**：Ali将继续进行相关开发工作，并考虑在后续PR中进行合并。

#### 后续行动计划
- 更新和记录通知数据模型的讨论细节，并在Slack频道中进一步讨论。
- Jan接手生命周期与复制问题的解决方案探讨。
- Eric继续探讨动态重分片方案，并在后续会议中讨论。
- Ali继续进行配置初始化的开发工作，并考虑在后续PR中进行合并。

#### 其他事项
- 提醒与会者加入Slack频道，以便更好地讨论开发相关事宜。
- 下次会议时间：下周。

---

本次会议记录涵盖了会议的关键细节、讨论的主要议题、决定的事项以及后续的行动计划，确保了会议内容的完整性和准确性。