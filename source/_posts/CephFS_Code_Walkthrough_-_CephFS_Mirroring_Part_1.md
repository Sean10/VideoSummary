---
title: "CephFS Code Walkthrough: CephFS Mirroring Part 1"
date: 2021-04-19
updated: 2021-04-20
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 会议主题：Ceph Pacific版本中新引入的FFS Mirroring功能代码走读

#### 会议时间：[具体时间]

#### 参会人员：[参会人员名单]

#### 会议内容总结：

1. **功能介绍**：
   - 本次会议主要讨论了Ceph Pacific版本中新引入的FFS Mirroring（或称为FFS Snapshot Mirroring）功能。
   - 该功能允许集群管理员或操作员选择性地将目录快照同步到远程Ceph文件系统，实现异步数据复制。

2. **功能结构与持久化**：
   - 讨论了涉及的数据结构及其在集群中的持久化位置，特别是在Ceph的Object中。
   - 介绍了FS Map（文件系统映射）及其在存储和管理对等信息中的作用。

3. **接口与操作**：
   - 详细介绍了从操作员或集群管理员角度如何启用目录的快照同步。
   - 涉及的接口包括启用/禁用文件系统镜像、添加/移除对等点等。
   - 强调了使用`fs snapshot mirror`前缀的接口，避免与`fs mirror`接口混淆。

4. **管理模块与数据复制**：
   - 管理模块（Manager Module）提供了镜像功能的接口，并负责与镜像守护进程（Mirror Daemons）的交互。
   - 镜像守护进程负责实际的数据复制和快照同步工作。

5. **状态机与目录映射**：
   - 介绍了如何通过状态机管理目录与镜像守护进程的映射关系。
   - 讨论了状态机的异步特性及其在目录添加、移除和重新分配中的应用。

6. **后续行动计划**：
   - 计划进行第二部分会议，详细讨论镜像守护进程的实际代码实现。
   - 将继续优化和完善FFS Mirroring功能，包括支持多个镜像守护进程的活跃-活跃模式。

#### 会议结论：
- 本次会议为Ceph Pacific版本中的FFS Mirroring功能提供了深入的技术解读和代码走读，为后续的开发和优化工作奠定了基础。

#### 后续行动：
- 安排第二部分会议，详细讨论镜像守护进程的代码实现。
- 继续优化FFS Mirroring功能，确保其稳定性和高效性。

#### 会议感谢：
- 感谢所有参会人员的积极参与和宝贵意见。

---

**注：** 本次会议纪要基于会议内容的详细记录，确保了关键细节、讨论议题、决定事项及后续行动计划的全面覆盖。