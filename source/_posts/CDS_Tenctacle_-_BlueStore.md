---
title: "CDS Tenctacle - BlueStore"
date: 2024-08-22
updated: 2024-08-23
tags:
categories:
- "视频总结"
subtitle: tech
---



### 会议纪要

**会议主题**： Blue Store (Tentacle) 项目进展及未来计划

**会议时间**： 2023年11月（具体日期未提及）

**参会人员**： Adam, Mat Vander Millan (Digital Ocean), Gary, Igor, Sam 等

**会议内容**：

**一、项目进展**

1. **性能退化问题**：
    - 开发了抓取工具，用于捕获OSD操作日志，分析性能退化原因。
    - 通过抓取工具获取了80百万操作日志样本，发现实际工作负载与测试环境存在显著差异。
    - 正在开发重放工具，用于模拟实际工作负载，进一步分析性能退化原因。

2. **RBD碎片化检查**：
    - 分析了Digital Ocean提供的RBD工作负载，发现存在未预期的碎片化模式。
    - 正在进行RBD碎片化检查的研究，计划在Sealon会议上分享相关结果。

3. **碎片化可视化**：
    - 计划开发碎片化可视化工具，以更直观地展示碎片化情况及其对性能的影响。

4. **Blue Store性能优化**：
    - 优化了KVS线程，减少写操作延迟。
    - 研究利用RoDB的管道功能，提高键值排序效率。
    - 计划进行自定义RZB日志修改，实现并行写入和排序。

5. **压缩改进**：
    - 开发了新的压缩算法，允许用户选择压缩程度和CPU资源消耗。
    - 正在进行RBD工作负载测试，评估压缩算法的实际效果。

6. **对象修改**：
    - Gary提出了在读取操作期间修改对象的方案，用于在线进行碎片化或压缩。

7. **分配器优化**：
    - Igor开发了一种新的分配器，提高了内存组织和队列性能。
    - 计划进一步研究分配器性能，并针对RBD OSD进行优化。

8. **Blue Store与BlueFS的协同工作**：
    - 计划进行实验，研究在单设备上同时使用Blue Store和BlueFS的可行性。

9. **元数据清理**：
    - 计划开发元数据清理工具，以简化Blue Store使用。

**二、未来计划**

1. **性能测试**：
    - 对新的分配器进行性能测试，并评估其适用性。
    - 收集分配器在长期运行环境中的性能数据。

2. **性能计数器**：
    - 添加性能计数器，以跟踪关键性能指标。
    - 开发性能分析工具，帮助用户识别性能瓶颈。

3. **稀疏读取**：
    - 与Seagate团队合作，实现稀疏读取功能。

4. **其他**：
    - 优化Blue Store性能。
    - 支持更多存储类型。

**三、行动计划**

1. 继续进行性能退化分析和优化。
2. 完成RBD碎片化检查和可视化工具开发。
3. 优化Blue Store性能，包括KVS线程、分配器、压缩等。
4. 开发元数据清理工具。
5. 与Seagate团队合作，实现稀疏读取功能。

**四、其他**

1. 讨论了关于分配器的选择和测试问题。
2. 讨论了关于性能计数器和性能分析工具的开发问题。

**五、会议总结**

本次会议详细讨论了Blue Store项目的进展和未来计划，明确了下一步的工作重点和行动计划。