---
title: "A 10-Year Retrospective Operating Ceph for Particle Physics - Dan van der Ster, Clyso GmbH"
date: 2023-05-05
updated: 2023-05-05
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

**会议主题：** 10年回顾：CERN的Ceph操作经验

**主讲人：** Dan

**会议地点：** 纽约

**会议内容总结：**

1. **个人背景介绍：**
   - Dan，加拿大人，拥有荷兰名字，曾在University of Victoria进行Grid computing研究生学习。
   - 自2008年起在CERN担任工程人员，2013年至2022年担任Ceph经理，过去一年担任IT首席架构师，自2023年4月起在Claiso工作。
   - 自2015年起参与Ceph董事会和基金会，近年加入Ceph执行委员会。

2. **CERN简介：**
   - CERN拥有世界最大的粒子加速器，位于日内瓦，27公里环形，100米地下。
   - 加速器使用超导磁体在接近绝对零度的温度下加速质子至接近光速，产生高能碰撞，用于物理研究。

3. **Ceph在CERN的应用：**
   - CERN自2013年开始使用Ceph，最初是一个300TB的概念验证，随后迅速扩展到3PB生产环境。
   - 2014-2015年进行Erasure coding研究和数据条带化。
   - 2016年首次测试Ceph的硬件透明替换能力，2017年有8个集群在生产中。
   - 2018-2019年开始测试CephFS和S3，近年来扩展到多个数据中心，支持业务连续性和灾难恢复用例。
   - 目前有17个集群，约100PB的原始磁盘容量。

4. **Ceph在CERN的重要性：**
   - Ceph支持CERN的实验室基础设施，包括配置管理、操作系统、数据库、监控、分析平台等。
   - 物理存储主要使用EOS，存储了500PB的数据。

5. **Ceph架构和挑战：**
   - CERN选择Ceph是因为其有机增长能力和性价比，避免了硬件供应商锁定。
   - 实施挑战包括硬件选择、数据副本策略、SSD使用、网络架构等。
   - Ceph集群的基本主机架构保持不变，使用服务器四合一机箱，配备SSD和双路Xeon或AMD处理器。

6. **性能和可扩展性：**
   - Ceph的性能被总结为“它就是那样”，强调了Ceph在处理复杂问题时的透明性。
   - 性能改进包括使用SSD缓存层、BlueStore的延迟优化等。
   - 可扩展性测试揭示了早期版本在处理大量OSD时的限制，但通过改进管理守护进程和BlueStore，情况得到改善。

7. **操作经验和教训：**
   - 操作Ceph集群需要谨慎应用更改，避免触发可能导致长时间恢复的条件。
   - Ceph需要更好的工具来预览和验证配置更改，类似于Nomad和Terraform的变更预览功能。
   - 数据放置的均匀性是一个挑战，但UpMap平衡器和PG重映射工具提供了帮助。

8. **成功案例和社区贡献：**
   - Ceph成功集成到OpenStack、Kubernetes等平台，保护数据可靠性。
   - Ceph社区的积极参与和知识共享是其成功的关键。

**后续行动计划：**
- 继续参与Ceph社区活动，计划今年举办六次确认的面对面活动。
- 探索和实施Ceph的新功能和改进，如Crimson后端的L2缓存。

**结论：**
- Ceph在CERN的十年操作经验证明了其作为分布式存储解决方案的可靠性和灵活性。通过持续的改进和社区支持，Ceph将继续在CERN及其他机构中发挥重要作用。

**会议结束：**
- 主讲人感谢CERN同事和Ceph社区成员的支持，并鼓励提问和进一步讨论。

[Applause]