---
title: "Ceph Developer Monthly 2021-05-05"
date: 2021-05-06
updated: 2021-05-07
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 会议主题：
1. 优化OSD Map以提升客户端使用效率
2. 增加通过标签或生成号来阻止实体列表的功能

#### 讨论内容：

##### 1. 优化OSD Map以提升客户端使用效率
- **问题描述**：在高速集群（如全闪存集群）中，重新平衡或恢复操作完成后，集群会留下大量OSD Map。客户端可能无法及时获取这些更新，导致使用过时的OSD Map。
- **解决方案讨论**：
  - **原始方案**：添加设置以限制构建增量OSD Map时的版本。
  - **替代方案**：使用细粒度锁来提高监控器在服务OSD Map时的并行性。
  - **讨论结果**：决定不采用细粒度锁，而是优化客户端请求OSD Map的行为，确保客户端只请求必要的OSD Map版本，减少监控器的负担。
  - **后续行动**：更新客户端以优化其请求OSD Map的行为，并可能进一步优化监控器处理OSD Map请求的方式。

##### 2. 增加通过标签或生成号来阻止实体列表的功能
- **问题描述**：在灾难恢复场景中，需要能够阻止整个集群或特定应用程序访问共享存储端点，以实现无缝切换。
- **解决方案讨论**：
  - **原始方案**：使用现有的阻止列表功能，但发现其不适用于此场景。
  - **替代方案**：通过标签或生成号来阻止实体列表，以更广泛地隔离集群。
  - **讨论结果**：决定探索更简单的网络层阻止方案，而不是在存储系统中实现复杂的阻止机制。
  - **后续行动**：进一步研究IP范围阻止列表的可行性，并与社区讨论其实现细节和时间框架。

#### 决定事项：
- 优化客户端请求OSD Map的行为，减少监控器的负担。
- 探索网络层阻止方案，以简化灾难恢复过程中的集群隔离。

#### 后续行动计划：
- 更新客户端代码以优化OSD Map请求。
- 研究并实现IP范围阻止列表功能。
- 与社区进一步讨论和细化阻止实体列表的方案。

#### 会议总结：
本次会议主要讨论了如何优化Ceph存储系统中的OSD Map使用和灾难恢复过程中的集群隔离问题。通过优化客户端行为和探索网络层阻止方案，旨在提高系统的性能和可靠性。后续将根据讨论结果进行具体实施和社区协作。