---
title: "Ceph Orchestrator Meeting 2022-01-25"
date: 2022-02-01
updated: 2022-02-02
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 关键细节
- **议题一：SSH命令超时问题**
  - 讨论了在管理模块中，如果SSH命令（如set volume命令）挂起，整个服务器循环会永久挂起的问题。
  - 提出了引入超时机制的必要性，但存在设置全局超时的困难，因为不同命令需要不同的超时时间。
  - 讨论了使用异步SSH库的超时选项，以及cephadm内置的超时参数。
  - 决定尝试使用cephadm的超时参数，并设置一个较高的默认超时时间，同时提供配置选项。

- **议题二：离线主机检测**
  - 讨论了如何检测离线主机，特别是在有代理的情况下，可以通过发送快速消息来确认主机是否在线。
  - 如果代理响应失败，将尝试重置连接并进行常规的主机检查。

#### 决定事项
- **超时机制实施**
  - 使用cephadm的超时参数，设置一个默认的高超时时间（如20分钟），并在超时后发出健康警告。
  - 提供配置选项，以便用户可以根据需要调整超时时间。

- **离线主机检测**
  - 在有代理的情况下，通过发送消息来快速检测主机是否在线。
  - 如果代理响应失败，将重置连接并进行常规的主机检查。

#### 后续行动计划
- **实施超时机制**
  - 测试cephadm的超时参数是否有效，并确保在超时后能发出健康警告。
  - 提供文档和健康警告信息，指导用户如何调整超时时间。

- **优化离线主机检测**
  - 在有代理的情况下，实现通过发送消息来快速检测主机是否在线的机制。
  - 考虑在未来的版本中进一步优化代理的功能，以减少对SSH的依赖。

- **文档和跟踪**
  - 更新相关文档，说明新的超时机制和离线主机检测方法。
  - 在跟踪系统中记录这些改进，以便后续跟踪和维护。

#### 其他讨论
- **代理功能扩展**
  - 讨论了代理功能的扩展，以便未来能够完全替代SSH，特别是在部署和管理节点方面。
  - 提出了创建一个大型跟踪器，列出代理需要实现的所有功能，以实现与SSH的完全功能对等。

- **告别**
  - Sebastian宣布这是他最后一次参加会议，感谢团队并祝愿大家成功。

#### 结论
会议讨论了超时问题和离线主机检测的解决方案，并决定实施cephadm的超时参数和代理的快速检测机制。同时，提出了未来代理功能扩展的计划，并记录了相关行动计划。