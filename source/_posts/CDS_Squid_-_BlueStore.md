---
title: "CDS Squid: BlueStore"
date: 2023-07-25
updated: 2023-07-26
tags:
categories:
- "视频总结"
subtitle: tech
---


### Ceph Blue Store 会议纪要

#### 会议基本信息
- **日期与时间**: [具体日期]
- **参会人员**: Eager, Adam, Igor 等（Mark 未能参加）
- **议程**: 讨论了Ceph Blue Store的多个关键议题，包括分配器模拟器、碎片化处理、弹性共享Blob、Codel算法、自定义写前锁等。

#### 主要讨论内容
1. **分配器模拟器**：
   - 决定解决Booster中定位器问题，启动了GSoC合作项目，目标是创建一个外部工具——分配器模拟器。
   - 模拟器将尽可能接近地重放现有工作负载，并添加一些合成数据，以预测对分配器所做更改在部署后的长期影响。

2. **碎片化处理**：
   - 计划在Blue Store中引入一些基本原语，以允许尝试对象碎片整理。
   - 这将涉及在对象存储上创建一些空闲周期队列，作为碎片整理的第一步。

3. **弹性共享Blob**：
   - 引入了一个新特性——弹性共享Blob，以优化克隆对象时的效率问题。
   - 该特性已回溯到Quincy和Reef版本，目前正在测试其对Blue Store的影响。

4. **Codel算法**：
   - 讨论了Codel算法，该算法旨在在延迟和吞吐量之间做出选择，通过批处理事务来提高整体性能。
   - 另一个相关的PR由Mark Nelson提出，同样基于类似逻辑，但实现层面不同。

5. **自定义写前锁**：
   - 讨论了在Blue Store级别实现写前锁，以减少写操作的延迟。
   - Igor已经开发了一个工程版本，但仍需进一步完善。

6. **政策与回溯**：
   - 讨论了代码重构和特性回溯的政策问题，特别是关于如何平衡新特性和稳定性。
   - 提议在开发文档中建立一些高层次的原则，以便未来参考和讨论。

#### 决定事项
- 将继续推进分配器模拟器的开发，并完善其度量标准。
- 将尝试在Blue Store中实现碎片整理的基本原语。
- 弹性共享Blob特性将继续在不同版本中进行测试和部署。
- 对于Codel算法和自定义写前锁，将继续进行测试和完善。
- 关于回溯政策，将创建一个文档来记录和讨论相关原则。

#### 后续行动计划
- 继续开发和测试分配器模拟器。
- 在Blue Store中实现碎片整理的基本原语。
- 对弹性共享Blob特性进行进一步测试和部署。
- 完善Codel算法和自定义写前锁的实现。
- 创建并维护回溯政策的文档，以便未来参考和讨论。

#### 备注
- 会议在预定时间内顺利结束，后续的CDS会议将在短时间内开始。

---

以上是本次Ceph Blue Store会议的详细纪要，涵盖了讨论的主要议题、决定的事项以及后续的行动计划。