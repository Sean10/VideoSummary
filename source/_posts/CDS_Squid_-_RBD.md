---
title: "CDS Squid: RBD"
date: 2023-07-25
updated: 2023-07-26
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要：RBD 子开发者规划峰会

#### 会议概览
本次会议是关于 RBD（RADOS Block Device）的子开发者规划峰会，主要讨论了关于镜像（mirroring）和快照（snapshot）相关的高优先级问题、新功能提案以及后续行动计划。

#### 主要议题
1. **镜像和快照相关的高优先级问题**
   - **数据损坏问题**：在同步克隆图像时，如果需要从父图像复制数据到克隆图像，次级集群上的镜像守护进程（mirror daemon）可能不会执行此操作，导致数据损坏。
   - **同步丢弃操作问题**：在某些情况下，丢弃操作可能不会正确同步，导致空间未被释放。
   - **块列表错误传播问题**：在某些代码路径中，错误被忽略，导致从块列表恢复失败。
   - **强制提升问题**：当前的强制提升操作需要等待同步完成，这与其定义不符，可能导致无限期等待。

2. **新功能提案**
   - **快照镜像的一致性组**：讨论了快照镜像的一致性组功能，但认为当前的RBD一致性组语义可能已经足够。
   - **性能改进**：包括从快照克隆、流式快照增量等提案，旨在提高镜像同步的性能和效率。

3. **其他非镜像相关议题**
   - **迁移功能改进**：包括从非Ceph源进行实时迁移的支持，以及与原生加密交互的改进。
   - **Windows支持改进**：讨论了Windows NBD驱动和守护进程的改进，以支持持久保留和多路复用。

#### 决定事项
- 确认了高优先级问题的修复计划，特别是数据损坏和同步丢弃操作的问题。
- 对于新功能提案，如快照镜像的一致性组和性能改进，将进行进一步的讨论和评估。
- 对于非镜像相关议题，如迁移功能和Windows支持，将逐步推进相关改进。

#### 后续行动计划
- 继续修复高优先级问题，并确保数据完整性和同步的可靠性。
- 对新功能提案进行详细讨论，评估其实现的可行性和优先级。
- 推进迁移功能和Windows支持的改进，确保功能的稳定性和性能。

#### 其他备注
- 会议记录将被保存，供后续参考和审查。
- 鼓励与会者提出未在列表中的议题，以便在后续会议中讨论。

会议结束时，主持人感谢所有参与者的参与，并期待在后续的沟通渠道中继续讨论和合作。