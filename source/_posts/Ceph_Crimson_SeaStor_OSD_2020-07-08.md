---
title: "Ceph Crimson/SeaStor OSD 2020-07-08"
date: 2020-07-08
updated: 2020-07-09
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 关键细节
- **Ceph 存储系统稳定性测试**：
  - 使用 BB C locator 进行压力测试，成功解决由构建 locator chip 引起的崩溃问题。
  - 在 CentOS 8 环境下，尝试通过基于 total 的环境将地址转换为堆栈回溯，并重复测试。

- **RocksDB 与 Ceph 集成问题**：
  - 讨论了 RocksDB 在 Ceph 中的使用问题，特别是 RocksDB 创建的存储与 Ceph 存储池的兼容性问题。
  - 提出解决方案：通过覆盖创建的符号来中断物理存储，并在创建时配置存储池。

- **Ceph 存储地址对齐测试**：
  - 讨论了非页面对齐地址的测试，确保测试案例涵盖非页面对齐的逻辑地址。
  - 计划编写测试案例并提供 PR 供审查。

- **Crimson 存储引擎的开发**：
  - 讨论了 Crimson 存储引擎的开发进展，包括回填（backfill）和恢复（recovery）功能的实现。
  - 强调了 Crimson 与经典 OSD 在事件调度和处理上的差异，特别是在多管道处理和事件同步方面。

#### 主要议题
- **Ceph 存储系统的稳定性与性能优化**：
  - 通过压力测试和地址转换技术解决系统崩溃问题。
  - 优化 RocksDB 与 Ceph 的集成，确保存储一致性和性能。

- **Crimson 存储引擎的功能开发与测试**：
  - 详细讨论了 Crimson 引擎的回填和恢复功能的实现细节。
  - 强调了代码的可测试性和与经典 OSD 的兼容性。

#### 决定事项
- **继续推进 Crimson 存储引擎的开发**：
  - 确保 Crimson 引擎的回填和恢复功能与经典 OSD 兼容，并优化事件调度和处理机制。

- **编写和审查非页面对齐地址的测试案例**：
  - 确保测试案例覆盖所有可能的非页面对齐逻辑地址，并提供 PR 供社区审查。

#### 后续行动计划
- **继续进行 Crimson 存储引擎的开发和测试**：
  - 完成回填和恢复功能的实现，并进行详细的测试以确保稳定性。

- **优化 RocksDB 与 Ceph 的集成**：
  - 通过覆盖符号和配置存储池来解决 RocksDB 创建的存储与 Ceph 存储池的兼容性问题。

- **编写和审查非页面对齐地址的测试案例**：
  - 确保测试案例的全面性和准确性，并提交 PR 供社区审查。

本次会议详细讨论了 Ceph 存储系统的多个关键问题，并制定了明确的后续行动计划，以确保系统的稳定性和性能优化。