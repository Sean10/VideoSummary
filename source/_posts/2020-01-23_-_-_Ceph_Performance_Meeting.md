---
title: "2020-01-23 :: Ceph Performance Meeting"
date: 2020-01-30
updated: 2020-01-30
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 关键细节
- **PG自动缩放**: 上周会议后，关于PG自动缩放的几个提案已经提交，包括Nihad的提案，将PG数量默认设置为32。
- **PR更新**: Radek的PR改变了标准列表T的编码方式，不再使用无缓冲复制。Keefe的PR涉及透明比较器，以避免额外工作。Igor的PR通过改变数据结构减少了缓存PG的内存占用。
- **性能优化**: 一个关于OSD PG日志条目的点改变PR，以及关于分裂读IO的PR，如果IO大小较大或NDB设备，理论上有助于性能提升。
- **RGW过滤逻辑**: Erica添加的RGW过滤逻辑已通过QA测试，但需要重新调整。
- **空间放大问题**: Igor讨论了blob空间放大问题，特别是在Octopus版本中，使用记录池时可能出现的问题。建议将最小分配大小设置为4k，但仍在考虑是否回退到16k或更大，以从性能角度考虑。

#### 讨论的主要议题
- **分配器行为**: 讨论了分配器在处理大IO请求时的行为，特别是是否应该返回连续的块或小的碎片。
- **最小分配大小**: 讨论了在不同设备和使用场景下，最小分配大小的最佳设置，特别是在SSD和HDD上的不同需求。
- **性能与空间利用的权衡**: 讨论了在性能和空间利用之间的权衡，特别是在处理小文件和大文件混合的场景下。

#### 决定的事项
- **分配器调整**: 决定进一步调查分配器的行为，特别是是否能够优化以返回更大的连续块。
- **最小分配大小设置**: 对于Octopus版本，决定对于HDD，如果不能及时解决分配器问题，将回退到64k的最小分配大小。

#### 后续行动计划
- **分配器测试**: Igor将尝试调整分配器，看是否能改善大IO请求的处理。
- **性能测试**: 重新运行性能测试，特别是关注大IO请求的性能变化。
- **RGW逻辑调整**: 重新调整RGW过滤逻辑，并考虑是否需要重新进行测试。
- **空间放大问题研究**: 继续研究blob空间放大问题，并考虑是否需要调整最小分配大小设置。

会议在讨论了多个技术细节和未来行动计划后结束，所有参与者将在下周继续跟进相关工作。