---
title: "New Read Balancer in Ceph - Laura Flores, IBM"
date: 2023-05-05
updated: 2023-05-05
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

**会议主题：** Ceph 新重平衡器介绍

**主讲人：** Laura Flores, IBM 的 RADOS 工程师

**时间：** [具体时间]

**地点：** [具体地点]

**参会人员：** [参会人员名单]

**会议内容总结：**

1. **重平衡的重要性：**
   - 在分布式存储系统如 Ceph 中，平衡写入和读取请求对于优化性能至关重要。
   - 平衡写入确保数据快速存储和复制，而读取则确保数据快速访问和检索。

2. **现有平衡器的局限：**
   - 现有的容量平衡器（fmap 平衡器）主要处理写入请求，不处理读取请求。
   - 新引入的读取平衡器（read balancer）专注于解决读取请求的不平衡问题。

3. **容量平衡与读取平衡的区别：**
   - 容量平衡是功能性需求，确保 Ceph 正常运行。
   - 读取平衡是性能需求，虽然不严格要求，但有助于系统整体性能提升。
   - 读取平衡操作成本低，仅涉及元数据操作，不涉及数据移动。

4. **新重平衡器的特点：**
   - 仅适用于复制池（replicated pools）。
   - 假设所有设备同质（homogeneous），但未来版本将考虑异质系统（heterogeneous systems）。

5. **新命令和工具：**
   - 引入新的 `ceph osd pool ls detail` 命令，显示读取平衡分数（read balance score）。
   - 新增 `ceph osd pg upmap primary` 命令，用于重新分配 PG 的主 OSD。

6. **演示和测试：**
   - 演示了在 v-start 集群上使用新工具进行读取平衡的过程。
   - 提供了 GitHub 仓库链接，包含演示脚本和相关信息。

7. **未来计划和改进：**
   - 计划将读取平衡器集成到 Ceph 的测试套件中。
   - 考虑将读取平衡器作为默认平衡器模块的一部分。
   - 未来版本将考虑设备大小和性能的异质性。

8. **问答环节：**
   - 讨论了读取平衡器在不同版本 Ceph 中的适用性。
   - 探讨了读取平衡器与自动缩放器（auto scaler）的潜在冲突。
   - 讨论了网络延迟对读取平衡的影响。

**决定事项：**
- 鼓励社区成员尝试新读取平衡器，并提供反馈。
- 计划将读取平衡器集成到 Ceph 的默认平衡器模块中。

**后续行动计划：**
- 完善文档，详细说明新工具的使用方法和效果。
- 进行性能测试，验证读取平衡器对集群性能的实际影响。
- 持续改进读取平衡器，考虑设备异质性的处理。

**联系方式：**
- Laura Flores 的邮箱：El Flores <f-l-o-r-e-s@ibm.com>

**会议结束：**
- 感谢所有参与者的提问和讨论，会议圆满结束。

[会议纪要编写人：[你的名字]]
[会议纪要审核人：[审核人名字]]
[会议纪要日期：[编写日期]]