---
title: "Ceph Performance Meeting 2022-09-15"
date: 2022-09-21
updated: 2022-09-22
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 关键细节
- **会议主题**: 讨论Ceph BlueStore中共享Blob的工作原理及其性能问题。
- **主要参与者**: Adam, Mark, Igor, 以及其他未具名的参与者。
- **讨论焦点**: 
  - 共享Blob在BlueStore中的实现和性能影响。
  - RBD镜像性能问题，特别是与快照相关的性能问题。
  - 对现有代码的调试和优化尝试。

#### 讨论的主要议题
1. **共享Blob的工作原理**:
   - 讨论了共享Blob在BlueStore中的具体实现，包括其引用计数和数据结构。
   - 分析了共享Blob在处理快照时的行为，特别是如何处理对象的修改和快照创建。

2. **性能问题**:
   - 针对RBD镜像性能问题，特别是频繁创建快照导致的性能下降进行了深入讨论。
   - 讨论了尝试通过改进迭代遍历范围的性能来优化性能，但遇到了引用计数和其他代码部分的复杂问题。

3. **代码优化和改进**:
   - 提出了使用扁平映射替换标准映射的尝试，以及对共享Blob数据结构的简化建议。
   - 讨论了可能的代码重构和新的实现方法，包括对共享Blob的重新设计和简化。

#### 决定的事项
- **进一步的研究和实验**:
  - 决定进行更多的实验和研究，以探索共享Blob的优化和简化方法。
  - 同意尝试新的实现方法，如Adam提出的单一实例跟踪器，以减少共享Blob的实例数量。

- **性能测试和分析**:
  - 计划进行详细的性能测试，以评估不同优化方案的效果。
  - 讨论了可能的性能瓶颈和需要进一步优化的代码部分。

#### 后续的行动计划
- **代码实验和实现**:
  - Adam将尝试实现单一实例跟踪器的概念，并分享初步结果。
  - 继续探索和实验其他可能的优化和改进方法。

- **性能测试和分析**:
  - 进行详细的性能测试，以评估新实现方法的效果。
  - 分析测试结果，确定进一步的优化方向。

- **持续讨论和反馈**:
  - 继续定期讨论和分享进展，确保团队成员之间的信息同步和反馈。

#### 结论
会议聚焦于Ceph BlueStore中共享Blob的性能问题和可能的优化方案。通过深入讨论和实验，团队旨在找到有效的解决方案，以提高RBD镜像和快照处理的性能。后续将继续进行实验和性能测试，以确保优化方案的有效性和可行性。