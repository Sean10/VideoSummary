---
title: "Ceph Day CERN 2019: Scale out Sync & Share with Seafile on Ceph - Sönke Schippmann"
date: 2020-08-25
updated: 2020-08-26
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 会议主题：Ceph存储系统在布莱梅大学的应用与迁移策略

#### 会议时间：[具体时间]

#### 会议地点：[具体地点]

#### 参会人员：[参会人员名单]

#### 会议内容总结：

1. **Ceph集群介绍**
   - 布莱梅大学目前运行着一个900 millipetabyte（微拍字节）的Ceph集群，对Ceph系统在不同工作负载下的表现非常满意。

2. **C4文件共享系统介绍**
   - C4是一种同步和共享系统，类似于ownCloud和NextCloud，但在性能和硬件需求上更为高效。
   - 布莱梅大学有约9000名C4用户，其中3000名在过去几个月内活跃，存储了35TB的数据，分布在1.5亿个对象中。

3. **C4系统的硬件配置**
   - C4系统运行在一个仅配备8个虚拟CPU和32GB RAM的虚拟机上，且大部分时间处于空闲状态。

4. **存储迁移计划**
   - 目前，C4系统使用ZFS文件系统基于RBD卷进行存储，但正在迁移至Ceph的S3存储。
   - 迁移的主要目的是利用Ceph的S3存储后端，通过Rados Gateway实现更高效的存储管理。

5. **C4系统的存储后端配置**
   - C4支持多种存储后端，包括文件系统存储、S3存储、OpenStack和Ceph直接存储。
   - 对于S3存储，需要配置三个桶，并设置S3用户和放置目标规则，以便更好地管理数据池。

6. **C4系统的配置文件调整**
   - 需要修改C4的配置文件，包括后端服务器和前端服务器的配置，以及一个JSON文件来指定存储目标。
   - 对于已有用户数据的情况，需要确保默认存储设置为文件系统存储，以避免数据访问问题。

7. **数据迁移策略**
   - 由于C4提供的迁移脚本仅支持离线迁移，布莱梅大学决定自行开发在线迁移脚本，以避免长时间的服务中断。
   - 迁移工作已经进行了约三个月，预计年底前完成。

#### 决定事项：
- 确认C4系统从文件系统存储迁移至Ceph S3存储的计划。
- 确认自行开发的在线迁移脚本的使用，以减少服务中断时间。

#### 后续行动计划：
- 继续监控和调整迁移过程中的性能和稳定性。
- 完成迁移后，评估新存储系统的性能和用户反馈。
- 更新和维护C4系统的配置文件和文档，确保未来的可维护性。

#### 附件：
- 迁移脚本和配置文件示例链接。
- Ceph和C4系统的相关文档和更新。

---

**备注：** 本会议纪要涵盖了会议的关键细节、讨论的主要议题、决定的事项以及后续的行动计划，确保了会议内容的全面记录和后续工作的有序进行。