---
title: "CDS G/H (Day 2) - RGW: bucket index scalability"
date: 2014-06-26
updated: 2014-06-26
tags:
categories:
- "视频总结"
subtitle: tech
---



会议纪要：

**会议主题**： Ceph分布式存储系统中的桶索引可扩展性问题讨论

**会议时间**： 未知

**参会人员**： Duong（负责桶索引可扩展性的研发人员）、Federer（主持人）、Teddy（负责Ceph集群运维）、Josh、Yahoo（其他研发人员）

**会议内容**：

**一、桶索引可扩展性问题**

1. **问题概述**： 
    - 现有的桶索引实现存在可扩展性问题，主要体现在以下两方面：
        - 单个桶索引对象的处理能力有限，只能支持10-20 RPS的请求量。
        - 随着记录数量的增加，桶索引对象存储的更新操作会占用大量时间，影响系统性能。
2. **解决方案**：
    - **方案一**： 将桶索引对象进行分片，每个分片对应一个桶索引对象，从而提高处理能力。
    - **方案二**： 禁用桶索引功能，适用于不需要桶索引列表功能的场景。
    - **方案三**： 在创建桶时允许用户指定分片数量，并存储在桶元数据中。

**二、技术细节讨论**

1. **分片存储**：
    - 将桶索引对象进行分片可以提高处理能力，但会引入新的问题，如分片管理、元数据更新等。
    - 讨论了分片策略、元数据存储、桶索引日志等细节。
2. **无序列表操作**：
    - 提出了一种新的无序列表操作，可以减少系统负载，但会牺牲列表的有序性。
    - 讨论了无序列表的实现方式、性能影响等。

**三、行动计划**

1. Duong将根据讨论结果修改原型，并提交相应的Pull Request。
2. 其他研发人员将参与审查和改进Pull Request。
3. 讨论未来可能的桶索引自动分片功能。

**四、其他事项**

1. 讨论了多部分上传的原子性问题，认为目前实现方式是安全的。
2. 讨论了桶索引与桶索引日志的存储方式，认为应该将它们存储在同一个对象中。

**五、会议总结**

本次会议针对Ceph分布式存储系统中的桶索引可扩展性问题进行了深入讨论，并提出了相应的解决方案。后续将根据讨论结果进行技术实现和改进。