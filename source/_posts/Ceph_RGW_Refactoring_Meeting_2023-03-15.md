---
title: "Ceph RGW Refactoring Meeting 2023-03-15"
date: 2023-03-15
updated: 2023-03-16
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 会议主题：关于多部分重新上传修复的测试覆盖率

**主要议题：**
- 讨论了多部分上传功能中避免数据和索引条目泄露的修复工作，该修复已合并到Reef版本中，但缺少针对孤立对象的测试覆盖。
- 提出了增加测试覆盖的具体形式，包括编写一个工作单元脚本，该脚本将执行多部分上传和重新上传，并扫描RADOS对象和桶索引以检查是否有泄露的对象和索引条目。

**决定事项：**
- Eric自愿负责编写测试脚本，该脚本将模拟多部分上传和重新上传操作，并验证是否存在孤立的RADOS对象和索引条目。

**后续行动计划：**
- Eric将更新跟踪器问题58780，详细说明测试计划，确保不遗漏关键细节。
- 讨论了在每次RGW验证作业后扫描孤立对象的建议，但认为这可能不适用于所有情况，特别是索引条目的问题。

#### 会议主题：关于归档区域的请求

**主要议题：**
- 讨论了一个长期存在的请求，即归档区域在对象元数据更改时生成新版本的问题。
- 提出了一个快速修复方案，即比较新旧对象版本并决定是否丢弃，但认为这可能是一个成本高昂的操作。

**决定事项：**
- 决定不采用快速修复方案，而是考虑更长期的解决方案，如内容可寻址的对象表示方法，这可能会提高RADOS对象名称的信息密度，并增加系统的灵活性。

**后续行动计划：**
- 将在周一的会议上进一步讨论此问题，并考虑在Upstream邮件列表中启动关于设计想法的讨论。

#### 其他事项

- 讨论了其他可能的改进方向，如基于块的内容可寻址块，这可能对大型对象特别有用。

**会议总结：**
- 本次会议主要集中在多部分上传修复的测试覆盖和归档区域的长期解决方案上，确定了具体的行动计划和后续讨论的方向。

**会议结束：**
- 会议在讨论完所有议题后结束，感谢所有参与者的贡献。