---
title: "Crimson Project Update - Samuel Just, IBM"
date: 2023-05-05
updated: 2023-05-05
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 会议主题：Crimson项目介绍及Reef更新

#### 主讲人：Sam

#### 会议内容总结：

1. **Crimson项目概述**：
   - Crimson项目旨在优化Ceph OSD（Object Storage Daemon）的性能，特别是在高IOPS环境下。
   - 主要目标是减少CPU开销，通过减少跨核心通信、拷贝和上下文切换，以及利用新兴存储技术如NVMe、ZNS和SMR。

2. **技术背景**：
   - 存储技术不断进步，IOPS从150（HDD）增长到10,000（SSD），甚至达到百万级别（NVMe）。
   - CPU性能未能同步提升，导致单个IO的CPU开销大幅增加。
   - 多核心架构虽然提高了整体性能，但增加了延迟和核心间通信开销。

3. **现有架构问题**：
   - 传统OSD架构在处理请求时涉及多个线程池和队列，导致大量的锁竞争和非确定性延迟。
   - 特别是在处理请求提交回调和PG（Placement Group）状态时，存在显著的性能瓶颈。

4. **Crimson架构设计**：
   - 采用C-star库，这是一个为SilkDB开发的调度器，支持在单个线程上多路复用异步操作。
   - 目标是实现单线程内完成请求处理，减少线程切换和核心间通信。
   - 通过使用future和callback机制，优化请求处理的同步和异步操作。

5. **C-store介绍**：
   - C-store是专为Crimson设计的对象存储实现，旨在利用ZNS等新兴存储技术。
   - 避免使用CPU密集型的元数据设计如RocksDB，支持高效的垃圾回收和数据迁移。
   - 通过逻辑地址和物理地址的分离，优化数据管理和垃圾回收过程。

6. **当前进展和未来计划**：
   - Crimson项目已支持RBD工作负载和复制池，Blue Store和C-store后端均已实现。
   - 正在进行多核心支持的开发，以及增强稳定性和性能测试。
   - 未来计划包括完善测试套件，实现数据校验（scrub），以及进一步优化多核心架构下的消息路由。

7. **用户参与和反馈**：
   - 鼓励用户通过设置实验性功能标志来测试Crimson，但目前不建议用于生产环境。
   - 用户反馈和性能测试数据对项目发展至关重要。

#### 后续行动计划：
- 完善测试套件，特别是数据校验（scrub）功能的实现。
- 继续优化多核心支持，改进消息路由和调度机制。
- 增强C-store的稳定性和性能，特别是针对ZNS和NVMe的优化。
- 收集用户反馈，持续迭代和优化Crimson项目。

#### 会议结束：
- 主讲人感谢大家的参与，并邀请提问和讨论。

[会议结束]