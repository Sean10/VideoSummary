---
title: "Ceph Developer Summit Quincy: CI"
date: 2021-04-12
updated: 2021-04-13
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 会议主题：测试基础设施改进讨论

#### 参会人员：David Galloway等

#### 会议时间：[具体时间]

#### 会议地点：[具体地点]

#### 主要议题：
1. **Jenkins作业和构建器的可靠性改进**
   - 讨论了Jenkins作业中存在的竞争条件问题，建议增加详细日志记录并延长日志存储时间。
   - 提出了设置预生产环境，以便在实际部署前更广泛地测试更改。

2. **测试环境的改进**
   - 讨论了如何改进测试节点升级或添加新补丁包时的现有设置。
   - 提出了使用临时Jenkins实例进行更详细的测试。

3. **PR标签和优先级**
   - 讨论了如何标记对构建器测试设置修复重要的PR，以便更容易识别和优先审查。

4. **日志和调试改进**
   - 讨论了如何改进Jenkins日志，使其更易于调试，特别是在make check测试中。
   - 提出了使用CTest输出机器可读信息，以便更容易识别失败的单个测试。

5. **元数据和机器信息**
   - 讨论了在Jenkins作业中包含更多关于运行作业的机器的元数据，以便更好地识别特定发行版或机器类型上的问题。

6. **已知竞争条件的处理**
   - 讨论了如何处理已知的难以调试的竞争条件，建议Jenkins能够自动重新运行遇到已知问题的作业。

7. **集成测试和Cephadm的改进**
   - 讨论了如何改进集成测试，特别是通过Cephadm部署和管理集群的能力。
   - 提出了增加更多工具和框架，如CBT，以收集更多运行时的资源利用信息。

8. **容器构建过程的改进**
   - 讨论了容器构建过程的脆弱性，建议将Dockerfile移到Ceph树中，以简化容器构建过程。

9. **降级测试**
   - 讨论了降级测试的重要性，建议创建一个专门的降级测试套件。

#### 决定事项：
- 增加Jenkins作业的日志详细程度和存储时间。
- 设置预生产环境以测试基础设施更改。
- 标记和优先处理对构建器测试设置修复重要的PR。
- 改进Jenkins日志以更易于调试。
- 在Jenkins作业中包含更多机器元数据。
- 自动重新运行遇到已知竞争条件的Jenkins作业。
- 改进Cephadm以支持更复杂的部署和管理任务。
- 简化容器构建过程。
- 创建降级测试套件。

#### 后续行动计划：
- 实施日志改进措施。
- 设置和配置预生产环境。
- 开发和部署PR标签和优先级系统。
- 改进Jenkins日志和调试工具。
- 实施机器元数据收集。
- 开发自动重新运行Jenkins作业的机制。
- 改进Cephadm以支持更多集成测试。
- 简化容器构建过程。
- 创建和实施降级测试套件。

#### 备注：
- 会议中提到的具体技术和工具，如Jenkins, Cephadm, CTest, CBT等，是Ceph分布式存储系统开发和测试中的关键组件。
- 会议讨论了多个技术细节和改进措施，旨在提高测试基础设施的可靠性和效率，确保Ceph系统的稳定性和性能。