---
title: "Ceph Crimson/SeaStore 2021-03-17"
date: 2021-03-18
updated: 2021-03-18
tags:
categories:
- "视频总结"
subtitle: tech
---


### 会议纪要

#### 主要议题与讨论内容

1. **性能优化与代码重构**
   - **PR2审查**：上周对PR2进行了审查，旨在改进Illinois存储的性能。
   - **客户端请求序列化器单元测试**：继续进行客户端请求序列化器的单元测试，特别是异常情况的处理。
   - **智能指针使用问题**：在Crimson中，发现使用intrusive_ptr发送消息而不是unique_ptr的问题。讨论了是否可以通过移动语义来避免使用智能指针，最终决定使用unique_ptr作为更安全的解决方案。

2. **代码修改与测试**
   - **GC修改与测试**：Sam的补丁在应用后，不同配置下的测试出现了多种问题。等待Sam完成GC的修改后重新进行测试。
   - **消息传递接口**：讨论了在不同核心间传递消息时，是否应使用foreign pointer作为接口，以及如何定义这一接口。

3. **功能开发与代码理解**
   - **Ceph存储源码理解**：正在阅读Ceph存储的源码，并尝试理解其详细设计。
   - **未来存储API实现**：注意到Ceph存储中某些未来存储API尚未实现，考虑是否可以进行相关工作。

4. **测试结果与问题**
   - **恢复与回填修复**：Shahan的补丁已合并，修复了恢复和回填问题。希望在下一次常规测试中能看到所有测试通过。
   - **节点管理器单元测试**：实现了节点管理器级别的单元测试，并进行了一些修复，目前正在审查中。

#### 决定事项

- **智能指针使用**：决定在消息传递中使用unique_ptr以提高安全性。
- **GC修改与测试**：等待Sam完成GC的修改后重新进行测试。
- **消息传递接口**：需要进一步讨论和定义在不同核心间传递消息的接口。

#### 后续行动计划

- **继续进行单元测试**：完成客户端请求序列化器的单元测试。
- **重新测试GC**：在Sam完成GC修改后，重新进行测试。
- **讨论消息传递接口**：安排离线会议，进一步讨论和定义消息传递接口。
- **实现未来存储API**：评估并开始实现Ceph存储中尚未实现的未来存储API。

#### 其他

- **测试结果更新**：关注并更新恢复与回填修复后的测试结果。
- **代码理解与学习**：继续深入理解Ceph存储的源码和设计。

### 结束语

会议结束，感谢大家的参与和讨论，期待后续的进展和成果。祝大家工作顺利！