---
title: "Next Generation Erasure Coding | Ceph Days London 2024"
date: 2024-08-23
updated: 2024-08-24
tags:
categories:
- "视频总结"
subtitle: tech
---



**会议纪要**

**会议时间**： [请填写会议时间]

**参会人员**： Bill（存储开发人员），Seth（其他参会人员）

**会议主题**： Ceph分布式存储中Erasure Coding优化方案讨论

**会议内容**：

* **背景介绍**：
    * 当前Ceph存储系统中，对象存储使用Erasure Coding，块存储和文件存储使用Replicated Pools。
    * Erasure Coding的优势在于降低存储成本，但性能不如Replicated Pools。
    * 目标是提高Erasure Coding的性能，使其在块存储和文件存储中更具竞争力。

* **性能瓶颈分析**：
    * 网络带宽：网络连接限制性能。
    * IOPS：硬盘性能限制，尤其是使用HDD时。
    * 延迟：读取和写入数据的延迟。
    * CPU：CPU资源限制。

* **优化方案**：
    * **读取优化**：
        * 部分读取：仅读取所需数据，减少网络带宽和CPU开销。
        * 直接读取：客户端直接向存储数据的OSD发送读取请求，减少网络跳数和CPU开销。
    * **写入优化**：
        * 简单覆盖优化：仅读取未修改的数据，合并新数据，计算新的校验码，并仅写入修改的数据和校验码。
        * Apparity Delta写入优化：读取旧数据和新数据，计算Delta，并应用于校验码，减少IOPS。
    * **块大小优化**：
        * 增加块大小：提高IOPS，减少网络带宽和CPU开销。
        * 根据对象大小动态调整块大小：针对不同大小的对象选择合适的块大小，提高效率。

* **行动计划**：
    * 完成部分读取优化，并发布到主分支。
    * 研究并实现其他优化方案。
    * 在T版本中提供Erasure Coding优化功能。

**讨论要点**：

* 部分读取和直接读取优化对客户端性能的影响。
* Apparity Delta写入优化对延迟的影响。
* 块大小优化对小对象的影响。
* 优化方案的复杂性和实施难度。

**结论**：

通过优化Erasure Coding，可以提高其在块存储和文件存储中的性能，使其更具竞争力。会议确定了具体的优化方案和行动计划，并讨论了相关技术细节。